{"version":3,"sources":["ClassTable.js","ClassExecutor.js","ClassSetting.js","ClassFilter.js","App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","tableWrapper","maxWidth","margin","backgroundColor","tableContainer","maxHeight","transition","table","minWidth","userSelect","thead","fontWeight","ClassTable","props","classes","useState","setClasses","useEffect","searchClass","toTime","toDate","toDay","a","timestamp","Date","getDay","toLocaleDateString","toTimeString","substring","page","console","log","data","programIds","paramClasses","fromDate","parseInt","now","fromDateAdj","toDateAdj","pageSize","pageNumber","distance","latitude","longitude","paramClub","clubId","$","ajax","type","url","dataType","headers","accessToken","res","map","c","classId","class","name","club","date","timeStart","day","start","end","timeEnd","capacity","filter","indexOf","paramTime","length","classes2","useFFClass","styles","prevDate","Paper","elevation","className","TableContainer","style","Table","stickyHeader","size","TableHead","TableRow","TableCell","TableBody","sort","b","currPrevDate","key","onClick","handleSelection","handleClick","selected","boxShadow","hover","globalExecuting","ClassExecutor","setTimestamp","useReducer","watches","action","output","target","clone","localStorage","setItem","JSON","stringify","_","stored","getItem","parse","dispatchWatches","executing","newValue","setExecuting","success","fail","bookClass","setInterval","preview","blockStyle","targetClass","padding","Button","component","buttonStyle","queue","marginBottom","Object","keys","id","innerBlockStyle","hoverPaper","innerBlockTitleStyle","textDecoration","timeRemaining","bookOpen","bookOffset","sresult","color","fresult","result","bookDuration","dd","hh","mm","ss","ddhhmmss","processBook","Fragment","transform","flexGrow","borderRadius","float","getExactTime","getHours","getMinutes","getSeconds","getMilliseconds","beforeTime","getTime","class_id","afterTime","responseText","error","messages","ClassSetting","tokenText","setTokenText","handleClose","setOpen","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","TextField","label","placeholder","multiline","fullWidth","rows","variant","InputLabelProps","shrink","value","onChange","e","DialogActions","setAccessToken","ClassFilter","clubs","selectedClub","setSelectedClub","selectedClasses","setSelectedClasses","selectedTime","setSelectedTime","settingDialogOpen","setSettingDialogOpen","setParamClub","setParamClasses","flat","setParamTime","IconButton","Settings","fontSize","FormControlLabel","control","Radio","checked","Checkbox","App","curr","setTargetClass","deselect","currentTarget","backgroundStyle","display","BOOK_OPEN_IN_SECOND","flexDirection","position","top","bottom","left","right","zIndex","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.4c735faf.chunk.js","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport $ from 'jquery';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nfunction ClassTable(props){\r\n  let classes = useFFClass(props);\r\n  let styles = useStyles();\r\n\r\n  let handleClick = (c) => {\r\n    props.handleSelection(c);\r\n  };\r\n\r\n  let i=0;\r\n  let prevDate=null;\r\n\r\n  return (\r\n    <Paper elevation={3} className={styles.tableWrapper}>\r\n      <TableContainer className={styles.tableContainer} style={{maxHeight: classes.length?'':36}}>\r\n        <Table stickyHeader className={styles.table} size=\"small\">\r\n          <TableHead className={styles.thead}>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Club</TableCell>\r\n              <TableCell>Class</TableCell>\r\n              <TableCell>Date</TableCell>\r\n              <TableCell>Time</TableCell>\r\n              <TableCell>Capacity</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {classes.sort((a,b)=>a.timestamp-b.timestamp).map(c => {\r\n              let currPrevDate = prevDate;\r\n              prevDate = c.date;\r\n              return <TableRow key={c.classId}\r\n                onClick={() => handleClick(c)}\r\n                style={{\r\n                  backgroundColor:props.selected?.classId===c.classId?'#00d8f57d':'',\r\n                  boxShadow:currPrevDate==null||c.date==currPrevDate?'':'#b6ccdd 0 2px 0 0 inset'\r\n                }} hover>\r\n                  <TableCell>{c.classId}</TableCell>\r\n                  <TableCell>{c.club}</TableCell>\r\n                  <TableCell>{c.class}</TableCell>\r\n                  <TableCell>{c.date} ({c.day})</TableCell>\r\n                  <TableCell>{c.start} - {c.end}</TableCell>\r\n                  <TableCell>{c.capacity}</TableCell>\r\n                </TableRow>;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  tableWrapper: {\r\n    maxWidth: 1000,\r\n    margin: '5px 0',\r\n    backgroundColor: '#ffffffe0'\r\n  },\r\n  tableContainer: {\r\n    maxHeight: 'calc(100vh - 20px)',\r\n    transition: 'max-height 0.5s'\r\n  },\r\n  table: {\r\n    minWidth: 650,\r\n    userSelect: 'none'\r\n  },\r\n  thead:{\r\n    '& th': {\r\n      fontWeight: 'bold',\r\n      backgroundColor: '#b6ccdd'\r\n    }\r\n  }\r\n});\r\n\r\nexport default ClassTable;\r\n\r\nfunction useFFClass(props){\r\n  let [classes, setClasses] = useState([]);\r\n\r\n  useEffect(function(){\r\n    async function searchClass(page=1){\r\n      console.log(\"Search Start\");\r\n      console.log(props);\r\n      var data = {\r\n        programIds: props.paramClasses,\r\n        fromDate: parseInt(Date.now()/1000 + props.fromDateAdj),\r\n        toDate: parseInt(Date.now()/1000 + props.toDateAdj),\r\n        pageSize: 100,\r\n        pageNumber: page,\r\n        distance: 2147483647,\r\n        latitude: 0,\r\n        longitude: 0\r\n      };\r\n      if(props.paramClub && props.paramClub !== 'FFP') data.clubId = props.paramClub;\r\n      var res = await $.ajax({\r\n        type: \"GET\",\r\n        url: \"https://api-mobile.circuithq.com/api/v2/class/search\",\r\n        dataType: 'json',\r\n        headers: {\r\n          \"Authorization\": props.accessToken,\r\n          \"User-Country-Code\": \"sg\"\r\n        },\r\n        data: data\r\n      });\r\n      function toTime(timestamp){\r\n        var d = new Date(timestamp*1000);\r\n        return d.toTimeString().substring(0,5);\r\n      }\r\n      function toDate(timestamp){\r\n          var d = new Date(timestamp*1000);\r\n          return d.toLocaleDateString();\r\n      }\r\n      function toDay(timestamp){\r\n          var d = new Date(timestamp*1000);\r\n          return ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][d.getDay()];\r\n      }\r\n      var classes = res.data;\r\n      classes = classes.map( c => {\r\n          return {\r\n              classId:c.classId,\r\n              class:c.name,\r\n              club:c.club.name,\r\n              clubId:c.club.clubId,\r\n              date:toDate(c.timeStart),\r\n              day:toDay(c.timeStart),\r\n              timestamp:c.timeStart,\r\n              start:toTime(c.timeStart),\r\n              end:toTime(c.timeEnd),\r\n              capacity:c.capacity\r\n          }\r\n      }).filter( c => c.capacity > 0 || !props.accessToken );\r\n      if(props.paramClub === 'FFP') classes = classes.filter(c=>c.club.indexOf('FFP')===0);\r\n      if(props.paramTime === 'No Work') classes = classes.filter(c=>c.day==='Sat'||c.day==='Sun'||parseInt(c.end)<=11||parseInt(c.start)>=20);\r\n      return classes;\r\n    }\r\n    if(props.paramClasses){\r\n      (async () => {\r\n        setClasses([]);\r\n        let classes = await searchClass();\r\n        console.log(classes);\r\n        setClasses(classes);\r\n        if(classes.length < 30){\r\n          let classes2 = await searchClass(2);\r\n          console.log(classes2);\r\n          setClasses([...classes, ...classes2]);\r\n        }\r\n      })();\r\n    }\r\n  }, [props.fromDateAdj, props.toDateAdj, props.paramClub, props.paramClasses, props.paramTime, props.accessToken]);\r\n\r\n  return classes;\r\n}","import React,{useState,useReducer,useEffect} from 'react';\r\nimport $ from 'jquery';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nlet globalExecuting = null;\r\n\r\nfunction ClassExecutor(props){\r\n\r\n  let [timestamp, setTimestamp] = useState(parseInt(Date.now()/1000));\r\n  let [watches, dispatchWatches] = useReducer((watches, action) => {\r\n    let output = {};\r\n    if(action.action === 'ADD' || action.action === 'UPDATE'){\r\n      output = {...watches, [action.target.classId]:action.target};\r\n    }else if(action.action === 'REMOVE'){\r\n      let clone = {...watches};\r\n      delete clone[action.target.classId];\r\n      output = clone;\r\n    }\r\n    localStorage.setItem('watches', JSON.stringify(output));\r\n    return output;\r\n  }, {}, _=>{\r\n    let stored = localStorage.getItem('watches');\r\n    return stored ? JSON.parse(stored) : {};\r\n  });\r\n  let [executing, setExecuting] = useReducer((executing, newValue) => {\r\n    globalExecuting = newValue;\r\n    return newValue;\r\n  }, null);\r\n  let styles = useStyles();\r\n\r\n  useEffect(function(){\r\n    (async () => {\r\n      let success = 0;\r\n      let fail = 0;\r\n      while(true){\r\n        if(executing !== null && globalExecuting !== null){\r\n          let canBooked = await bookClass(executing, props.accessToken);\r\n          if(canBooked){\r\n            dispatchWatches({\r\n              action:'UPDATE',\r\n              target:{...watches[executing], success:++success, fail:fail}\r\n            });\r\n            setExecuting(null);\r\n            break;\r\n          }else{\r\n            dispatchWatches({\r\n              action:'UPDATE',\r\n              target:{...watches[executing], success:success, fail:++fail}\r\n            });\r\n          }\r\n        }else{\r\n          break;\r\n        }\r\n      }\r\n    })();\r\n  }, [executing]);\r\n\r\n  useEffect(function(){\r\n    setInterval(_=>{\r\n      setTimestamp(parseInt(Date.now()/1000));\r\n    }, 100);\r\n  }, []);\r\n\r\n  let processBook = c => {\r\n    var timeRemaining = c.timestamp - timestamp - props.bookOpen - props.bookOffset;\r\n    let sresult = c.success?<span>SUCCESS: <strong style={{color:'green'}}>{c.success}</strong> </span>:'';\r\n    let fresult = c.fail?<span>FAILED: <strong style={{color:'red'}}>{c.fail}</strong></span>:'';\r\n    let result = (sresult||fresult)&&<div>{sresult}{fresult}</div>;\r\n    if(timeRemaining <= 0 && timeRemaining+props.bookDuration >= 0 && executing == null && !result){\r\n      setExecuting(c.classId);\r\n    }\r\n    if(executing === c.classId){\r\n      timeRemaining += props.bookDuration;\r\n      if(timeRemaining >= 0){\r\n        return <strong><span style={{color:'red'}}>...EXECUTING...</span> (finish in {timeRemaining} s)<br/>{result}</strong>;\r\n      }else{\r\n        setExecuting(null);\r\n      }\r\n    }else if(timeRemaining >= 0){\r\n      var dd = parseInt(timeRemaining/60/60/24);\r\n      var hh = parseInt(timeRemaining/60/60%24);\r\n      var mm = parseInt(timeRemaining/60%60);\r\n      var ss = parseInt(timeRemaining%60);\r\n      var color = {color: (dd>0||hh>3)?'black':(hh>0?'orange':'red')};\r\n      var ddhhmmss = (dd?dd+'d ':'')+(hh?hh+'h ':'')+(mm?mm+'m ':'')+(ss?ss+'s ':'');\r\n      return <span>\r\n        Start Booking in <strong style={color}>{ddhhmmss}</strong>\r\n      </span>;\r\n    }else if(result){\r\n      return <span>{result}</span>;\r\n    }\r\n    return <span>Invalid</span>\r\n  };\r\n\r\n  let preview = (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{\r\n        backgroundColor:props.targetClass?(watches[props.targetClass.classId]?'#fdc4d2':'#c4f6fd'):'',\r\n        padding:5\r\n      }} className={styles.preview}>\r\n        <strong>Class ID: </strong> {props.targetClass?.classId} <br/>\r\n        <strong>Club: </strong> {props.targetClass?.club} <br/>\r\n        <strong>Class: </strong> {props.targetClass?.class} <br/>\r\n        <strong>Date: </strong> {props.targetClass?.date} ({props.targetClass?.day}) <br/>\r\n        <strong>Time: </strong> {props.targetClass?.start} - {props.targetClass?.end} <br/>\r\n        <strong>Capacity: </strong> {props.targetClass?.capacity} <br/>\r\n        {\r\n          props.targetClass && !watches[props.targetClass.classId] && <Button component={Paper} style={{...buttonStyle, backgroundColor:'#1c94f3b5'}}\r\n          onClick={() => dispatchWatches({action:'ADD',target:props.targetClass})}>Add</Button>\r\n        }\r\n        {\r\n          props.targetClass && watches[props.targetClass.classId] && <Button component={Paper} style={{...buttonStyle, backgroundColor:'#f31c68b5'}}\r\n          onClick={() => dispatchWatches({action:'REMOVE',target:props.targetClass})}>Remove</Button>\r\n        }\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  let queue = (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{padding: '1px 5px 1px 5px', backgroundColor: '#ffffffd0'}}>\r\n        <div style={{marginBottom:-6}}><strong>Execution Queue</strong></div>\r\n        {\r\n          Object.keys(watches).map(id =>\r\n            <div key={id} style={innerBlockStyle}>\r\n              <Paper elevation={2} className={styles.hoverPaper} onClick={_=>props.handleSelection(watches[id])} style={{\r\n                backgroundColor:props.targetClass?.classId==id?'#99f3ff':'',\r\n                padding:3\r\n              }}>\r\n                <div style={{...innerBlockTitleStyle,\r\n                  backgroundColor: executing==id?'#d07dff':(\r\n                    watches[id].success?'#7dff84':(\r\n                      watches[id].fail?'#ff7daa':'#d0d0d0'\r\n                  )),\r\n                  boxShadow: props.targetClass?.classId==id?'#00c4ffbf 0 0 99px 0 inset':'',\r\n                  margin: '-3px -3px 0',\r\n                  padding: '0 3px'\r\n                }}>\r\n                  <strong style={{textDecoration: 'underline'}}>{watches[id].club}</strong><strong>: {watches[id].class}</strong> ({watches[id].classId}) <br/>\r\n                </div>\r\n                <strong>{watches[id].date} ({watches[id].day})</strong><span> ({watches[id].start} - {watches[id].end})</span><br/>\r\n                {processBook(watches[id])}\r\n              </Paper>\r\n            </div>)\r\n        }\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {preview}\r\n      {!!Object.keys(watches).length && queue}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ClassExecutor;\r\n\r\nconst useStyles = makeStyles({\r\n  hoverPaper: {\r\n    '&:hover': {\r\n      backgroundColor: '#ffffffff',\r\n      transform: 'scale(1.03)'\r\n    },\r\n    transition: 'transform 0.1s',\r\n    backgroundColor: '#ffffff80'\r\n  },\r\n  preview: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0',\r\n      transition: 'background-color 0.1s'\r\n    },\r\n    transition: '',\r\n    backgroundColor: '#ffffffd0'\r\n  }\r\n});\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nvar innerBlockStyle = {\r\n  margin: '8px 0px',\r\n  flexGrow: 1\r\n}\r\n\r\nvar innerBlockTitleStyle = {\r\n  borderRadius: '5px 5px 0px 0px '\r\n}\r\n\r\nvar buttonStyle = {\r\n  float: 'right',\r\n  margin: '-40px 5px'\r\n}\r\n\r\nfunction getExactTime(date){\r\n  return date.getHours()+':'+date.getMinutes()+':'+date.getSeconds()+'.'+date.getMilliseconds()\r\n}\r\n\r\nasync function bookClass(classId, accessToken){\r\n\r\n  console.log('Booking... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n  let beforeTime = new Date().getTime();\r\n\r\n  try {\r\n\r\n    var res = await $.ajax({\r\n      type: \"POST\",\r\n      url: \"https://api-mobile.circuithq.com/api/v2/class/book\",\r\n      dataType: 'json',\r\n      headers: {\r\n        \"Authorization\": accessToken,\r\n        \"User-Country-Code\": \"sg\"\r\n      },\r\n      data: {\r\n        class_id: classId\r\n      }\r\n    });\r\n    console.table(res);\r\n\r\n    /*await new Promise(r => setTimeout(r, 50));\r\n  return Math.random() < 0.01;*/\r\n\r\n    let afterTime = new Date().getTime();\r\n    console.log('[' + (afterTime-beforeTime) + 'ms] Success... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    return true;\r\n  } catch (err) {\r\n    console.table(JSON.parse(err.responseText).error.messages);\r\n    let afterTime = new Date().getTime();\r\n    console.log('[' + (afterTime-beforeTime) + 'ms] Failed... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    return false;\r\n  }\r\n}","import React,{useState,useReducer,useEffect} from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\nfunction ClassSetting(props){\r\n\r\n  let [tokenText, setTokenText] = useState(props.accessToken);\r\n\r\n  let handleSave = _ => {\r\n    props.setAccessToken(tokenText);\r\n    localStorage.setItem('accessToken', tokenText);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  let handleClose = _ => {\r\n    setTokenText(props.accessToken);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={props.open} onClose={handleClose}>\r\n      <DialogTitle>Settings</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Access Token is required for getting class capacity and booking classes.</DialogContentText>\r\n        <br/>\r\n        <TextField label=\"Access Token\" placeholder=\"Bearer 58f7GciOiJIUzI1NiJ9.eyJpc3MiOiJodHRw3...\"\r\n        multiline fullWidth rows={8} variant=\"outlined\" InputLabelProps={{shrink: true}}\r\n        value={tokenText} onChange={e=>setTokenText(e.target.value)}/>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\">\r\n          Save\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ClassSetting;\r\n","import React,{useState,useReducer,useEffect} from 'react';\r\nimport $ from 'jquery';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {Settings} from '@material-ui/icons';\r\nimport ClassSetting from './ClassSetting'\r\n\r\nlet globalExecuting = null;\r\n\r\nfunction ClassFilter(props){\r\n\r\n  const clubs = {\r\n    'All': null,\r\n    'FFP': 'FFP',\r\n    'Paragon': 4,\r\n    'Fusionopolis': 10,\r\n    '100AM': 17\r\n  };\r\n  const classes = {\r\n    'Access': [183,184,185,182],\r\n    'Bodyjam': [17]\r\n  };\r\n  const times = ['All', 'No Work'];\r\n\r\n  let [selectedClub, setSelectedClub] = useState(10);\r\n  let [selectedClasses, setSelectedClasses] = useState({\r\n    'Access':true,\r\n    'Bodyjam':true\r\n  });\r\n  let [selectedTime, setSelectedTime] = useState('No Work');\r\n  let [settingDialogOpen, setSettingDialogOpen] = useState(false);\r\n\r\n  useEffect(function(){\r\n    props.setParamClub(selectedClub);\r\n    props.setParamClasses('['+Object.keys(selectedClasses).filter(key=>selectedClasses[key]).map(key=>classes[key]).flat()+']');\r\n    props.setParamTime(selectedTime);\r\n  });\r\n\r\n  let styles = useStyles();\r\n\r\n  return (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{padding:5}} className={styles.filter}>\r\n        <span style={{float: 'right'}}>\r\n          <IconButton onClick={_=>setSettingDialogOpen(true)}><Settings color='action' fontSize='small'/></IconButton>\r\n          <ClassSetting open={settingDialogOpen} setOpen={setSettingDialogOpen}\r\n          accessToken={props.accessToken} setAccessToken={props.setAccessToken}/>\r\n        </span>\r\n        <strong>Club: </strong><br/>\r\n        {\r\n          Object.keys(clubs).map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedClub===clubs[name]}\r\n            onChange={_=>setSelectedClub(clubs[name])}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Class: </strong><br/>\r\n        {\r\n          Object.keys(classes).map(name=><span key={name}><FormControlLabel control={\r\n            <Checkbox checked={selectedClasses[name] || false}\r\n            onChange={_=>setSelectedClasses({...selectedClasses, [name]:!selectedClasses[name]})}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Time: </strong><br/>\r\n        {\r\n          times.map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedTime===name}\r\n            onChange={_=>setSelectedTime(name)}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClassFilter;\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  filter: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0'\r\n    },\r\n    transition: 'background-color 0.1s',\r\n    backgroundColor: '#ffffffd0'\r\n  }\r\n});","import React,{useState,useReducer} from 'react';\nimport ClassTable from './ClassTable';\nimport ClassExecutor from './ClassExecutor';\nimport ClassFilter from './ClassFilter';\nimport './App.css';\n\nfunction App() {\n\n  const BOOK_OPEN_IN_SECOND = 46*60*60;\n  const AFTER_OPEN_IN_SECOND = 4*24*60*60;\n  const BOOK_OFFSET_IN_SECOND = 1; // FF is 0.5 seconds behind us\n  const BOOK_DURATION_IN_SECOND = 10;\n  let [accessToken, setAccessToken] = useState(_=>localStorage.getItem('accessToken')||'');\n\n  let [targetClass, setTargetClass] = useReducer((curr,c)=>{\n    if(curr?.classId !== c?.classId){\n      console.log(c);\n      return c;\n    }else{\n      return null;\n    }\n  }, null);\n\n  let [paramClub, setParamClub] = useState(null);\n  let [paramClasses, setParamClasses] = useState(null);\n  let [paramTime, setParamTime] = useState(null);\n\n  function deselect(e){\n    if(e.target == e.currentTarget){\n      setTargetClass(null);\n    }\n  }\n\n  return (\n      <div style={{...backgroundStyle, display:'flex'}} onClick={deselect}>\n        <div style={{...blockStyle, maxWidth:1000}} onClick={deselect}>\n          <ClassTable handleSelection={c => setTargetClass(c)}\n            fromDateAdj={0}\n            toDateAdj={BOOK_OPEN_IN_SECOND+AFTER_OPEN_IN_SECOND}\n            selected={targetClass}\n            accessToken={accessToken}\n            {...{paramClub,paramClasses,paramTime}}\n          />\n        </div>\n        <div style={{...blockStyle, minWidth:'325px', maxWidth:'400px', flexGrow: 0}} onClick={deselect}>\n          <div style={{display:'flex', flexDirection:'column'}}>\n            <ClassFilter {...{setParamClub,setParamClasses,setParamTime}} {...{accessToken, setAccessToken}}/>\n            <ClassExecutor handleSelection={c => setTargetClass(c)}\n              targetClass={targetClass}\n              bookOpen={BOOK_OPEN_IN_SECOND}\n              bookOffset={BOOK_OFFSET_IN_SECOND}\n              bookDuration={BOOK_DURATION_IN_SECOND}\n              accessToken={accessToken}\n            />\n          </div>\n        </div>\n      </div>\n  );\n}\n\nexport default App;\n\nvar backgroundStyle = {\n  position: 'absolute',\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n  zIndex: -1,\n  padding: '0 5px',\n  \n};\n\nvar blockStyle = {\n  margin: '5px 5px',\n  flexGrow: 1\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}