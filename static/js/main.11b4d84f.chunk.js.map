{"version":3,"sources":["HttpRequest.js","ClassTable.js","Context.js","ClassExecutor.js","ClassSetting.js","FavSetting.js","ClassFilter.js","particles.js","FFBooker.js","App.js","serviceWorker.js","index.js"],"names":["globalForceUpdateFFClass","reqId","searchClass","props","toTime","toDate","toDay","a","timestamp","Date","getDay","toLocaleDateString","toTimeString","substring","page","data","programIds","paramClasses","fromDate","parseInt","now","fromDateAdj","toDateAdj","pageSize","pageNumber","distance","latitude","longitude","paramClub","clubId","console","log","$","ajax","type","url","dataType","headers","accessToken","country","res","classes","map","c","classId","class","name","club","clubTypes","fullname","clubTier","date","timeStart","day","duration","timeEnd","start","end","capacity","address","filter","paramShowFull","paramTime","forceUpdateFFClass","getExactTime","getHours","getMinutes","getSeconds","getMilliseconds","debug","setExecuting","isWaitlist","fullyBookedCallback","beforeTime","getTime","r1","Math","random","r2","Promise","r","setTimeout","responseText","class_id","table","afterTime","JSON","parse","message","error","messages","forEach","x","bookClassTimeout","timeout","p1","bookClass","then","resolve","_","p2","race","useStyles","makeStyles","tableWrapper","maxWidth","margin","backgroundColor","tableContainer","maxHeight","transition","minWidth","userSelect","thead","fontWeight","ClassTable","useState","setClasses","useReducer","updateFFClassCnt","useEffect","Object","keys","length","classTypes","currReqId","classes2","useFFClass","styles","prevDate","Paper","elevation","className","TableContainer","style","Table","stickyHeader","size","TableHead","TableRow","TableCell","TableBody","sort","b","currPrevDate","key","onClick","handleSelection","handleClick","selected","boxShadow","hover","fontStretch","DebugContext","createContext","globalExecuting","ClassExecutor","setTimestamp","watches","action","output","target","clone","bookOpen","bookOffset","success","waitlist","fail","localStorage","setItem","stringify","stored","getItem","dispatchWatches","executing","newValue","useContext","isFullyBooked","bookWait","bookPromise","canBook","setInterval","id","lastSeen","seenStatus","result","seenCapacity","toGoogleDate","d","toISOString","replace","formatTime","sec","short","dd","hh","mm","ss","ddhhmmss","preview","blockStyle","targetClass","padding","buttonStyle","IconButton","window","open","escape","replaceAll","Map","color","fontSize","Button","component","queue","overflowX","overflowY","marginBottom","innerBlockStyle","hoverPaper","innerBlockTitleStyle","textDecoration","Tooltip","title","status","placement","tooltip","arrow","VerifiedUser","Cancel","HelpOutline","timeRemaining","sresult","wresult","fresult","bookDuration","processBook","calendarSaved","EventNote","undefined","Fragment","transform","top","flexGrow","borderRadius","float","gap","display","gridTemplateColumns","ClassSetting","tokenText","setTokenText","countryText","setCountryText","handleClose","setOpen","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","TextField","label","placeholder","multiline","fullWidth","rows","variant","InputLabelProps","shrink","value","onChange","e","FormControl","InputLabel","htmlFor","Select","notched","inputProps","MenuItem","FormHelperText","DialogActions","setAccessToken","location","reload","FavSetting","tab","setTab","favs","setFavs","groups","favChoices","favTypeText","Tabs","TabIndicatorProps","textColor","val","Tab","wrapped","group","list","ida","idb","localeCompare","item","selectedItem","Star","star","StarBorder","favType","updateFavs","flexFlow","border","borderTop","height","overflow","position","paddingLeft","left","ClassFilter","favClubs","setFavClubs","favClasses","setFavClasses","setFavType","setFavTypeText","setFavChoices","favDialogOpen","setFavDialogOpen","settingDialogOpen","setSettingDialogOpen","clubs","reduce","shortname","curr","sel","selectedClub","setSelectedClub","selectedClasses","setSelectedClasses","selectedTime","setSelectedTime","setParamClub","setParamClasses","flat","setParamTime","Settings","Stars","FormControlLabel","control","Radio","checked","Checkbox","FFBooker","setTargetClass","setClubs","clubWebsiteName","indexOf","match","fetchClubType","useClubType","groupTypes","flatMap","programTypeId","subTopics","programId","toUpperCase","toLowerCase","fetchClassType","useClassType","deselect","currentTarget","Notification","requestPermission","hiddenState","currentNoti","document","hidden","noti","body","requireInteraction","onclick","focus","parent","close","onbeforeunload","Provider","backgroundStyle","BOOK_OPEN_IN_SECOND","flexDirection","width","params","particlesOptions","bottom","right","App","md5","password","hash","href","atob","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.11b4d84f.chunk.js","sourcesContent":["import React, {useState,useReducer,useEffect} from 'react';\r\nimport $ from 'jquery';\r\n\r\nlet reqId = 0;\r\nlet globalForceUpdateFFClass;\r\n\r\nexport function useClubType(props){\r\n  let [clubs, setClubs] = useState({});\r\n  useEffect(() => {\r\n    async function fetchClubType(){\r\n      var res = await $.ajax({\r\n        type: \"GET\",\r\n        url: \"https://api-mobile.circuithq.com/api/v2/club/\"+props.country,\r\n        dataType: 'json',\r\n        headers: {\r\n          \"Authorization\": props.accessToken,\r\n          \"User-Country-Code\": props.country\r\n        }\r\n      });\r\n      setClubs(res.data.reduce((result,item)=>{\r\n        result[item.clubId] = {\r\n          name: item.name,\r\n          address: item.address,\r\n          fullname: item.clubWebsiteName,\r\n          shortname: item.name.replace(/^FFP?\\s*/,''),\r\n          type: item.name.indexOf('FFP') >= 0 || item.clubWebsiteName.match(/^platinum /i) ? 'Platinum':\r\n                item.clubWebsiteName.match(/^(zone |icon siam)/i) ? 'Zone' :\r\n                item.clubWebsiteName.match(/^club /i) ? 'Club' : 'Premium'\r\n        };\r\n        return result;\r\n      },{}));\r\n    }\r\n    fetchClubType();\r\n  }, [props.accessToken]);\r\n  return clubs;\r\n}\r\n\r\nexport function useClassType(props){\r\n  let [classes, setClasses] = useState({});\r\n  useEffect(() => {\r\n    async function fetchClassType(){\r\n      var res = await $.ajax({\r\n        type: \"GET\",\r\n        url: \"https://api-mobile.circuithq.com/api/v2/topic/\"+props.country,\r\n        dataType: 'json',\r\n        headers: {\r\n          \"Authorization\": props.accessToken,\r\n          \"User-Country-Code\": props.country\r\n        }\r\n      });\r\n      let groupTypes = {};\r\n      setClasses(res.data.flatMap(group=>{\r\n        groupTypes[group.programTypeId] = group.name;\r\n        return group.subTopics;\r\n      }).reduce((result,item)=>{\r\n        result[item.programId] = {\r\n          name: item.name,\r\n          shortname: item.name.replace(/([A-Za-z0-9])([A-Za-z0-9]*)/g,(a,b,c)=>b.toUpperCase()+c.toLowerCase()),\r\n          type: groupTypes[item.programTypeId]\r\n        };\r\n        return result;\r\n      },{}));\r\n    }\r\n    fetchClassType();\r\n  }, [props.accessToken]);\r\n  return classes;\r\n}\r\n\r\nexport async function searchClass(props, page=1){\r\n  var data = {\r\n    programIds: props.paramClasses,\r\n    fromDate: props.fromDate ? props.fromDate : parseInt(Date.now()/1000 + props.fromDateAdj),\r\n    toDate: props.toDate ? props.toDate : parseInt(Date.now()/1000 + props.toDateAdj),\r\n    pageSize: 100,\r\n    pageNumber: page,\r\n    distance: 2147483647,\r\n    latitude: 0,\r\n    longitude: 0\r\n  };\r\n  if(props?.paramClub !== 'FFP'){\r\n    data.clubId = props.paramClub;\r\n  }\r\n  console.log(\"Search Start\");\r\n  console.log(data);\r\n  var res = await $.ajax({\r\n    type: \"GET\",\r\n    url: \"https://api-mobile.circuithq.com/api/v2/class/search\",\r\n    dataType: 'json',\r\n    headers: {\r\n      \"Authorization\": props.accessToken,\r\n      \"User-Country-Code\": props.country\r\n    },\r\n    data: data\r\n  });\r\n  function toTime(timestamp){\r\n    var d = new Date(timestamp*1000);\r\n    return d.toTimeString().substring(0,5);\r\n  }\r\n  function toDate(timestamp){\r\n      var d = new Date(timestamp*1000);\r\n      return d.toLocaleDateString();\r\n  }\r\n  function toDay(timestamp){\r\n      var d = new Date(timestamp*1000);\r\n      return ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][d.getDay()];\r\n  }\r\n  var classes = res.data;\r\n  classes = classes.map( c => {\r\n      return {\r\n          classId:c.classId,\r\n          class:c.name,\r\n          club:props.clubTypes?.[c.club.clubId]?.fullname,\r\n          clubTier:props.clubTypes?.[c.club.clubId]?.type,\r\n          clubId:c.club.clubId,\r\n          date:toDate(c.timeStart),\r\n          day:toDay(c.timeStart),\r\n          timestamp:c.timeStart,\r\n          duration:c.timeEnd-c.timeStart,\r\n          start:toTime(c.timeStart),\r\n          end:toTime(c.timeEnd),\r\n          capacity:c.capacity,\r\n          address:props.clubTypes?.[c.club.clubId]?.address\r\n      }\r\n  }).filter( c => c.capacity > 0 || !props.accessToken || props.paramShowFull );\r\n  if(props.paramClub === 'FFP') classes = classes.filter(c=>c.clubTier==='Platinum');\r\n  if(props.paramTime === 'No Work') classes = classes.filter(c=>c.day==='Sat'||c.day==='Sun'||parseInt(c.end)<=11||parseInt(c.start)>=20);\r\n  return classes;\r\n}\r\n\r\nexport function useFFClass(props){\r\n  let [classes, setClasses] = useState([]);\r\n  let [updateFFClassCnt, forceUpdateFFClass] = useReducer(x=>x+1 ,0);\r\n  globalForceUpdateFFClass = forceUpdateFFClass;\r\n\r\n  useEffect(function(){\r\n    if(props.paramClasses && Object.keys(props.clubTypes).length && Object.keys(props.classTypes).length){\r\n      (async (currReqId) => {\r\n        setClasses([]);\r\n        let classes = await searchClass(props);\r\n        if(currReqId === reqId){\r\n          setClasses(classes);\r\n          if(classes.length < 30){\r\n            let classes2 = await searchClass(props,2);\r\n            if(currReqId === reqId){\r\n              setClasses([...classes, ...classes2]);\r\n            }\r\n          }\r\n        }\r\n      })(++reqId);\r\n    }\r\n  }, [\r\n      props.fromDateAdj, props.toDateAdj,\r\n      props.paramClub, props.paramClasses, props.paramTime,\r\n      props.accessToken, updateFFClassCnt, props.clubTypes, props.classTypes\r\n  ]);\r\n\r\n  return classes;\r\n}\r\n\r\nexport function forceUpdateFFClass(){\r\n  globalForceUpdateFFClass();\r\n}\r\n\r\nfunction getExactTime(date){\r\n  return date.getHours()+':'+date.getMinutes()+':'+date.getSeconds()+'.'+date.getMilliseconds()\r\n}\r\n\r\nasync function bookClass(classId, accessToken, country, debug, setExecuting, isWaitlist=false, fullyBookedCallback=()=>{}){\r\n\r\n  console.log('Booking... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n  let beforeTime = new Date().getTime();\r\n\r\n  try {\r\n\r\n    if(debug){\r\n      console.log('DEBUG');\r\n      let r1 = Math.random()*Math.random()*Math.random();\r\n      let r2 = Math.random()*Math.random()*Math.random();\r\n      await new Promise(r => setTimeout(r, 50 + r1*r2*20000));\r\n      if(Math.random() > (isWaitlist ? 0.5 : 0.03))\r\n        throw {responseText:'{\"error\":{\"messages\":[{\"message\":\"Debug_Error\"}]}}'};\r\n      if(Math.random() < 0.5 && !isWaitlist)\r\n        throw {responseText:'{\"error\":{\"messages\":[{\"message\":\"booking_errors_fully_booked\"}]}}'};\r\n      setExecuting(null);\r\n    }else{\r\n      var res = await $.ajax({\r\n        type: \"POST\",\r\n        url: \"https://api-mobile.circuithq.com/api/v2/class/\" + (isWaitlist?'waitlist':'book'),\r\n        dataType: 'json',\r\n        headers: {\r\n          \"Authorization\": accessToken,\r\n          \"User-Country-Code\": country\r\n        },\r\n        data: {\r\n          class_id: classId\r\n        }\r\n      });\r\n      console.table(res);\r\n      setExecuting(null);\r\n    }\r\n\r\n    let afterTime = new Date().getTime();\r\n    if(isWaitlist)\r\n      console.log('[' + (afterTime-beforeTime) + 'ms] Waitlist... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    else\r\n      console.log('[' + (afterTime-beforeTime) + 'ms] Success... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    return isWaitlist ? 'waitlist' : true;\r\n  } catch (err) {\r\n    let res = JSON.parse(err.responseText);\r\n    let message = null;\r\n    if(res && res.message) {\r\n      console.error(res.message); // booking_errors_limit_reached booking_errors_fully_booked booking_errors_too_soon booking_errors_overlap errors_unexpected errors_maintenance_mode errors_token_expired\r\n      message = res.message;\r\n    }\r\n    else if(res && res.error && res.error.messages){\r\n      res.error.messages.forEach(x=>{\r\n        console.error(x?.message);\r\n        message = x?.message;\r\n      });\r\n    }\r\n    else{\r\n      console.error(res);\r\n      message = res;\r\n    }\r\n    let afterTime = new Date().getTime();\r\n    console.error('[' + (afterTime-beforeTime) + 'ms] Failed... ' + classId + ' ('+ getExactTime(new Date()) + ')' + ' ' + message);\r\n    if(message == 'booking_errors_fully_booked'){\r\n      fullyBookedCallback();\r\n    }    \r\n    return false;\r\n  }\r\n}\r\n\r\nexport function bookClassTimeout(classId, accessToken, country, debug, timeout, setExecuting, isWaitlist, fullyBookedCallback){\r\n  let p1 = bookClass(classId, accessToken, country, debug, setExecuting, isWaitlist, fullyBookedCallback).then( res => Promise.resolve(_=>new Promise(r=>r(res))) );\r\n  let p2 = new Promise(r => setTimeout(r, isWaitlist ? 1000 : timeout)).then( _ => _=>Promise.resolve(p1.then(r=>Promise.resolve(r()))) );\r\n  return Promise.race([p1, p2]);\r\n}","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport {useFFClass} from './HttpRequest';\r\n\r\nfunction ClassTable(props){\r\n  let classes = useFFClass(props);\r\n  let styles = useStyles();\r\n\r\n  let handleClick = (c) => {\r\n    props.handleSelection(c);\r\n  };\r\n\r\n  let prevDate=null;\r\n\r\n  return (\r\n    <Paper elevation={3} className={styles.tableWrapper}>\r\n      <TableContainer className={styles.tableContainer} style={{maxHeight: classes.length?'':36}}>\r\n        <Table stickyHeader className={styles.table} size=\"small\">\r\n          <TableHead className={styles.thead}>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Club</TableCell>\r\n              <TableCell>Class</TableCell>\r\n              <TableCell>Date</TableCell>\r\n              <TableCell>Time</TableCell>\r\n              <TableCell>Capacity</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {classes.sort((a,b)=>a.timestamp-b.timestamp).map(c => {\r\n              let currPrevDate = prevDate;\r\n              prevDate = c.date;\r\n              return <TableRow key={c.classId}\r\n                onClick={() => handleClick(c)}\r\n                style={{\r\n                  backgroundColor:props.selected?.classId===c.classId?'#00d8f57d':'',\r\n                  boxShadow:currPrevDate==null||c.date===currPrevDate?'':'#b6ccdd 0 2px 0 0 inset'\r\n                }} hover>\r\n                  <TableCell>{c.classId}</TableCell>\r\n                  <TableCell style={{fontStretch:c.club.length>25?'condensed':''}}>{c.club}</TableCell>\r\n                  <TableCell style={{fontStretch:c.class.length>15?'condensed':''}}>{c.class}</TableCell>\r\n                  <TableCell>{c.date} ({c.day})</TableCell>\r\n                  <TableCell>{c.start} - {c.end}</TableCell>\r\n                  <TableCell>{c.capacity}</TableCell>\r\n                </TableRow>;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  tableWrapper: {\r\n    maxWidth: 1000,\r\n    margin: '5px 0',\r\n    backgroundColor: '#ffffffe0'\r\n  },\r\n  tableContainer: {\r\n    maxHeight: 'calc(100vh - 20px)',\r\n    transition: 'max-height 0.5s'\r\n  },\r\n  table: {\r\n    minWidth: 650,\r\n    userSelect: 'none'\r\n  },\r\n  thead:{\r\n    '& th': {\r\n      fontWeight: 'bold',\r\n      backgroundColor: '#b6ccdd'\r\n    }\r\n  }\r\n});\r\n\r\nexport default ClassTable;\r\n","import React,{createContext} from 'react';\r\n\r\nconst DebugContext = createContext(false);\r\n\r\nexport {DebugContext};\r\n\r\n","import React,{useState,useReducer,useEffect,useContext} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {EventNote,Map,VerifiedUser,Cancel,HelpOutline} from '@material-ui/icons';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport {DebugContext} from './Context.js';\r\n\r\nimport {bookClassTimeout, searchClass} from './HttpRequest';\r\n\r\nlet globalExecuting = null;\r\n\r\nfunction ClassExecutor(props){\r\n\r\n  let [timestamp, setTimestamp] = useState(parseInt(Date.now()/1000));\r\n  let [watches, dispatchWatches] = useReducer((watches, action) => {\r\n    let output = {};\r\n    if(action.action === 'ADD' || action.action === 'UPDATE'){\r\n      output = {...watches, [action.target.classId]:action.target};\r\n    }else if(action.action === 'REMOVE'){\r\n      let clone = {...watches};\r\n      delete clone[action.target.classId];\r\n      output = clone;\r\n    }else if(action.action === 'EXECUTE'){\r\n      action.target.timestamp = timestamp + props.bookOpen + props.bookOffset + 3;\r\n      delete action.target.success;\r\n      delete action.target.waitlist;\r\n      delete action.target.fail;\r\n      output = {...watches, [action.target.classId]:action.target};\r\n    }\r\n    localStorage.setItem('watches', JSON.stringify(output));\r\n    return output;\r\n  }, {}, _=>{\r\n    let stored = localStorage.getItem('watches');\r\n    return stored ? JSON.parse(stored) : {};\r\n  });\r\n  let [executing, setExecuting] = useReducer((executing, newValue) => {\r\n    globalExecuting = newValue;\r\n    return newValue;\r\n  }, null);\r\n  let styles = useStyles();\r\n  let debug = useContext(DebugContext);\r\n\r\n  useEffect(function(){\r\n    (async () => {\r\n      let success = 0;\r\n      let waitlist = 0;\r\n      let fail = 0;\r\n      let isFullyBooked = false;\r\n      while(true){\r\n        if(executing !== null && globalExecuting !== null){\r\n          let bookPromise = await bookClassTimeout(\r\n                              executing, props.accessToken, props.country, debug,\r\n                              props.bookWait, setExecuting, isFullyBooked, ()=>isFullyBooked=true);\r\n          bookPromise().then(canBook => {\r\n            if(canBook === true){\r\n              dispatchWatches({\r\n                action:'UPDATE',\r\n                target:{...watches[executing], success:++success, waitlist:waitlist, fail:fail}\r\n              });\r\n              setExecuting(null);\r\n            }else if(canBook === 'waitlist'){\r\n              dispatchWatches({\r\n                action:'UPDATE',\r\n                target:{...watches[executing], success:success, waitlist:++waitlist, fail:fail}\r\n              });\r\n              setExecuting(null);\r\n            }else{\r\n              dispatchWatches({\r\n                action:'UPDATE',\r\n                target:{...watches[executing], success:success, waitlist:waitlist, fail:++fail}\r\n              });\r\n            }\r\n          });\r\n        }else{\r\n          break;\r\n        }\r\n      }\r\n    })();\r\n  }, [executing]);\r\n\r\n  useEffect(function(){\r\n    setInterval(_=>{\r\n      setTimestamp(parseInt(Date.now()/1000));\r\n    }, 100);\r\n  }, []);\r\n\r\n  useEffect(function(){\r\n    Object.keys(watches).forEach(async id=>{\r\n      let c = watches[id];\r\n      if(!c.lastSeen || timestamp-c.lastSeen >= 12*60*60){\r\n        c.seenStatus = false;\r\n        try{\r\n          let result = await searchClass({\r\n            fromDate: c.timestamp-15*60,\r\n            toDate: c.timestamp+c.duration+15*60,\r\n            paramClub: c.clubId,\r\n            paramClasses: '[]',\r\n            paramTime: 'All',\r\n            paramShowFull: true,\r\n            accessToken: props.accessToken,\r\n            country: props.country\r\n          });\r\n          let target = result.filter(c => c.classId == id)[0];\r\n          c.seenStatus = !!target;\r\n          c.seenCapacity = target?.capacity;\r\n        }catch(err){\r\n          delete c.seenStatus;\r\n          console.error(err);\r\n        }finally{\r\n          c.lastSeen = parseInt(Date.now()/1000);\r\n          dispatchWatches({action: 'UPDATE', target: c});\r\n        }\r\n      }\r\n    });\r\n  }, [parseInt(timestamp/10)]);\r\n\r\n  let toGoogleDate = d => d.toISOString().replace(/[-:]/g,'').replace(/\\d\\d\\.\\d\\d\\d/,'00');\r\n\r\n  let saveCalendar = c => {\r\n    c.calendarSaved = true;\r\n    dispatchWatches({action: 'UPDATE', target: c});\r\n    window.open('http://www.google.com/calendar/render?'+\r\n`action=TEMPLATE\r\n&text=${c.class}\r\n&dates=${toGoogleDate(new Date(c.timestamp*1000))}/${toGoogleDate(new Date(c.timestamp*1000+(c.duration||1.5*60*60)*1000))}\r\n&details=${c.club + ': ' + c.class}\r\n&location=${escape(c.club + ' - ' + c.address.replaceAll('/',' '))}\r\n&trp=false\r\n&sprop=\r\n&sprop=name:`, '_blank');\r\n  };\r\n\r\n  let openMap = c => {\r\n    window.open(`http://google.com/maps/dir//${escape(c.club + ' ' + c.address.replaceAll('/',' '))}`, '_blank');\r\n  };\r\n\r\n  let formatTime = (sec, short=false) => {\r\n    var dd = parseInt(sec/60/60/24);\r\n    if(short && dd > 0) return dd+'d';\r\n    var hh = parseInt(sec/60/60%24);\r\n    if(short && hh > 0) return hh+'h';\r\n    var mm = parseInt(sec/60%60);\r\n    if(short && mm > 0) return mm+'m';\r\n    var ss = parseInt(sec%60);\r\n    if(short && ss > 0) return ss+'s';\r\n    var ddhhmmss = (dd?dd+'d ':'')+(hh?hh+'h ':'')+(mm?mm+'m ':'')+(ss?ss+'s ':'');\r\n    return ddhhmmss;\r\n  }\r\n\r\n  let processBook = c => {\r\n    var timeRemaining = c.timestamp - timestamp - props.bookOpen - props.bookOffset;\r\n    let sresult = c.success?<span>SUCCESS: <strong style={{color:'green'}}>{c.success}</strong> </span>:'';\r\n    let wresult = c.waitlist?<span>WAITLIST: <strong style={{color:'orange'}}>{c.waitlist}</strong> </span>:'';\r\n    let fresult = c.fail?<span>FAILED: <strong style={{color:'red'}}>{c.fail}</strong></span>:'';\r\n    let result = (sresult||wresult||fresult)&&<div>{sresult}{wresult}{fresult}</div>;\r\n    if(timeRemaining <= 0 && timeRemaining+props.bookDuration >= 0 && executing == null && !result){\r\n      setExecuting(c.classId);\r\n    }\r\n    if(executing === c.classId){\r\n      timeRemaining += props.bookDuration;\r\n      if(timeRemaining >= 0){\r\n        return <strong><span style={{color:'red'}}>...EXECUTING...</span> (finish in {parseInt(timeRemaining)} s)<br/>{result}</strong>;\r\n      }else{\r\n        setExecuting(null);\r\n      }\r\n    }else if(timeRemaining >= 0){\r\n      var color = {color: (timeRemaining>3*60*60)?'black':(timeRemaining>1*60*60?'orange':'red')};\r\n      var ddhhmmss = formatTime(timeRemaining);\r\n      return <span>\r\n        Start Booking in <strong style={color}>{ddhhmmss}</strong>\r\n      </span>;\r\n    }else if(result){\r\n      return <span>{result}</span>;\r\n    }\r\n    return <span>Invalid</span>\r\n  };\r\n\r\n  let preview = (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{\r\n        backgroundColor:props.targetClass?(watches[props.targetClass.classId]?'#fdc4d2':'#c4f6fd'):'',\r\n        padding:5\r\n      }} className={styles.preview}>\r\n        <div style={{...buttonStyle, margin:'auto'}}>\r\n          {\r\n            props.targetClass && <IconButton onClick={_=>openMap(props.targetClass)}><Map color='action' fontSize='small'/></IconButton>\r\n          }\r\n        </div>\r\n        <strong>Class ID: </strong> {props.targetClass?.classId} <br/>\r\n        <strong>Club: </strong> {props.targetClass?.club} ({props.targetClass?.clubId}) <br/>\r\n        <strong>Class: </strong> {props.targetClass?.class} <br/>\r\n        <strong>Date: </strong> {props.targetClass?.date} ({props.targetClass?.day}) <br/>\r\n        <strong>Time: </strong> {props.targetClass?.start} - {props.targetClass?.end} <br/>\r\n        <strong>Capacity: </strong> {props.targetClass?.capacity} <br/>\r\n        <div style={buttonStyle}>\r\n          {\r\n            props.targetClass && !watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#1c94f3b5'}}\r\n            onClick={() => dispatchWatches({action:'ADD',target:props.targetClass})}>Add</Button>\r\n          }\r\n          {\r\n            debug && props.targetClass && watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#d21cf3'}}\r\n            onClick={() => dispatchWatches({action:'EXECUTE',target:props.targetClass})}>Execute</Button>\r\n          }\r\n          {\r\n            props.targetClass && watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#f31c68b5'}}\r\n            onClick={() => dispatchWatches({action:'REMOVE',target:props.targetClass})}>Remove</Button>\r\n          }\r\n        </div>\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  let queue = (\r\n    <div style={{...blockStyle, overflowX:'hidden', overflowY:'overlay'}}>\r\n      <Paper elevation={3} style={{padding: '1px 5px 1px 5px', backgroundColor: '#ffffffd0'}}>\r\n        <div style={{marginBottom:-6}}><strong>Execution Queue</strong></div>\r\n        {\r\n          Object.keys(watches).map(id =>\r\n            <div key={id} style={innerBlockStyle}>\r\n              <Paper elevation={2} className={styles.hoverPaper} onClick={_=>props.handleSelection(watches[id])} style={{\r\n                backgroundColor:props.targetClass?.classId==id?'#99f3ff':'',\r\n                padding:3\r\n              }}>\r\n                <div style={{...innerBlockTitleStyle,\r\n                  backgroundColor: executing==id?'#d07dff':(\r\n                    watches[id].success?'#7dff84':(\r\n                    watches[id].waitlist?'#ffec68':(\r\n                    watches[id].fail?'#ff7daa':'#d0d0d0'\r\n                  ))),\r\n                  boxShadow: props.targetClass?.classId==id?'#00c4ff40 0 0 99px 0 inset':'',\r\n                  margin: '-3px -3px 0',\r\n                  padding: '0 3px'\r\n                }}>\r\n                  <strong style={{textDecoration: 'underline'}}>{watches[id].club}</strong><strong>: {watches[id].class}</strong>\r\n                  <Tooltip title={(_=>{\r\n                    let classId = watches[id].classId;\r\n                    let status = watches[id].seenStatus === false ? '[INVALID]' : '';\r\n                    let capacity = (watches[id].seenCapacity??'?') + ' / ' + watches[id].capacity;\r\n                    let lastSeen = watches[id].lastSeen && '(' + formatTime(parseInt(Date.now()/1000)-watches[id].lastSeen, true)+' ago)' || '';\r\n                    return `${status} Cap: ${capacity} ${lastSeen}`;\r\n                  })()} placement='top' classes={{tooltip:styles.tooltip}} arrow>\r\n                    <span onClick={() => {delete watches[id].lastSeen; delete watches[id].seenStatus; dispatchWatches({action:'UPDATE',target:watches[id]});}}>{\r\n                      watches[id].seenStatus === true ? <VerifiedUser fontSize='small' style={{color:'green', marginBottom:-3}}/> : \r\n                      (watches[id].seenStatus === false ? <Cancel fontSize='small' style={{color:'red', marginBottom:-3}}/> :\r\n                        <HelpOutline fontSize='small' style={{color:'gray', marginBottom:-3}}/>)\r\n                    }</span>\r\n                  </Tooltip>\r\n                  <span style={{color:'gray'}}></span>\r\n                </div>\r\n                <strong>{watches[id].date} ({watches[id].day})</strong><span> ({watches[id].start} - {watches[id].end})</span><br/>\r\n                {processBook(watches[id])}\r\n                <div style={buttonStyle}>\r\n                  {\r\n                    !!watches[id].success && <IconButton onClick={_=>saveCalendar(watches[id])}><EventNote color={watches[id].calendarSaved?'disabled':undefined} fontSize='small'/></IconButton>\r\n                  }\r\n                </div>\r\n              </Paper>\r\n            </div>)\r\n        }\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {preview}\r\n      {!!Object.keys(watches).length && queue}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ClassExecutor;\r\n\r\nconst useStyles = makeStyles({\r\n  hoverPaper: {\r\n    '&:hover': {\r\n      backgroundColor: '#ffffffff',\r\n      transform: 'scale(1.03)'\r\n    },\r\n    transition: 'transform 0.1s',\r\n    backgroundColor: '#ffffff80'\r\n  },\r\n  preview: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0',\r\n      transition: 'background-color 0.1s'\r\n    },\r\n    transition: '',\r\n    backgroundColor: '#ffffffd0'\r\n  },\r\n  tooltip: {\r\n    top: '8px',\r\n    color: '#efefef',\r\n    fontSize: 'small',\r\n    backgroundColor: '#333333',\r\n    '&>span.MuiTooltop-arrow':{\r\n      backgroundColor: '#333333'\r\n    }\r\n  }\r\n});\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nvar innerBlockStyle = {\r\n  margin: '8px 0px',\r\n  flexGrow: 1\r\n}\r\n\r\nvar innerBlockTitleStyle = {\r\n  borderRadius: '5px 5px 0px 0px '\r\n}\r\n\r\nvar buttonStyle = {\r\n  float: 'right',\r\n  margin: '-40px 5px',\r\n  gap: 5,\r\n  display: 'grid',\r\n  gridTemplateColumns: 'auto auto'\r\n}\r\n","import React,{useState} from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\nfunction ClassSetting(props){\r\n\r\n  let [tokenText, setTokenText] = useState(props.accessToken);\r\n  let [countryText, setCountryText] = useState(props.country);\r\n\r\n  let handleSave = _ => {\r\n    props.setAccessToken(tokenText);\r\n    localStorage.setItem('accessToken', tokenText);\r\n    if(props.country !== countryText){\r\n      localStorage.setItem('country', countryText);\r\n      localStorage.setItem('watches', '{}');\r\n      localStorage.setItem('favClasses', '{}');\r\n      localStorage.setItem('favClubs', '{}');\r\n      window.location.reload();\r\n    }\r\n    props.setOpen(false);\r\n  };\r\n\r\n  let handleClose = _ => {\r\n    setTokenText(props.accessToken);\r\n    setCountryText(props.country);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={props.open} onClose={handleClose}>\r\n      <DialogTitle>Settings</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Access Token is required for getting class capacity and booking classes.</DialogContentText>\r\n        <TextField label=\"Access Token\" placeholder=\"Bearer 58f7GciOiJIUzI1NiJ9.eyJpc3MiOiJodHRw3...\"\r\n        multiline fullWidth rows={8} variant=\"outlined\" InputLabelProps={{shrink: true}}\r\n        value={tokenText} onChange={e=>setTokenText(e.target.value)}/>\r\n        <br/>\r\n        <br/>\r\n        <DialogContentText>Choose your country:</DialogContentText>\r\n        <FormControl variant=\"outlined\">\r\n          <InputLabel htmlFor='country-select'>Country</InputLabel>\r\n          <Select label='Country' value={countryText} variant=\"outlined\" onChange={e=>setCountryText(e.target.value)}\r\n          notched inputProps={{id:'country-select'}}>\r\n            <MenuItem value='sg'>Singapore</MenuItem>\r\n            <MenuItem value='th'>Thailand</MenuItem>\r\n          </Select>\r\n          {props.country!==countryText && <FormHelperText>Execution Queue and Favorites will be reset</FormHelperText>}\r\n        </FormControl>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\">\r\n          Save\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ClassSetting;\r\n","import React,{useState,useEffect} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport {Star,StarBorder} from '@material-ui/icons';\r\n\r\nfunction FavSetting(props){\r\n\r\n  let [tab, setTab] = useState(null);\r\n  let [favs, setFavs] = useState(props.favs);\r\n\r\n  useEffect(()=>setFavs(props.favs), [props.favs, props.open]);\r\n\r\n  let styles = useStyles();\r\n\r\n  let handleSave = _ => {\r\n    localStorage.setItem(props.favType, JSON.stringify(favs));\r\n    props.updateFavs();\r\n    handleClose();\r\n  };\r\n\r\n  let handleClose = _ => {\r\n    props.setOpen(false);\r\n    setFavs({});\r\n    setTab(null);\r\n  };\r\n\r\n  let groups = {};\r\n  Object.keys(props.favChoices||{}).forEach(id=>groups[props.favChoices[id].type]=true);\r\n\r\n  return (\r\n    <Dialog open={props.open} onClose={handleClose} fullWidth>\r\n      <DialogTitle>Favorite {props.favTypeText}</DialogTitle>\r\n      <DialogContent>\r\n        <Tabs\r\n          TabIndicatorProps={{style:{backgroundColor:'#0000'}}}\r\n          value={tab}\r\n          textColor=\"secondary\"\r\n          onChange={(e,val)=>setTab(val)}\r\n          className={styles.tab}\r\n        >\r\n          <Tab value={null} label=\"All\" wrapped={true} />\r\n          {Object.keys(groups).map(group=><Tab key={group} value={group} label={group} />)}\r\n        </Tabs>\r\n        <Paper className={styles.list}>\r\n          {\r\n            Object.keys(props.favChoices||{})\r\n              .filter(id=>tab==null||props.favChoices[id].type===tab)\r\n              .sort((ida,idb)=>(props.favChoices[ida].fullname||props.favChoices[ida].name)\r\n                .localeCompare(props.favChoices[idb].fullname||props.favChoices[idb].name))\r\n              .map(id=> <Paper className={`${styles.item} ${favs[id]?styles.selectedItem:''}`}\r\n                               onClick={()=>setFavs({...favs, [id]:!favs[id]})} key={id}\r\n                        >\r\n                          {favs[id] ? <Star color='secondary' className={styles.star}/>:\r\n                                      <StarBorder color='action' className={styles.star}/>}\r\n                          {props.favChoices[id].fullname || props.favChoices[id].name}\r\n                        </Paper>)\r\n          }\r\n        </Paper>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\">\r\n          Save\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default FavSetting;\r\n\r\nlet useStyles = makeStyles({\r\n  tab:{\r\n    backgroundColor: 'whitesmoke',\r\n    borderRadius: '10px 10px 0px 0px',\r\n    '& [role=tablist]':{\r\n      flexFlow:'wrap'\r\n    },\r\n    '& [role=tablist]>.Mui-selected':{\r\n      backgroundColor:'#f7d7e1',\r\n      borderRadius: '10px 10px 0px 0px',\r\n      border: '2px #f7d7e6 solid'\r\n    },\r\n    '& [role=tablist]>button':{\r\n      backgroundColor:'#00000008',\r\n      borderRadius: '10px 10px 0px 0px',\r\n      borderTop: '2px #f5f5f5 solid'\r\n    }\r\n  },\r\n  list:{\r\n    height: '50vh',\r\n    overflow: 'auto',\r\n    backgroundColor: '#f5f5f5',\r\n    position: 'relative'\r\n  },\r\n  item:{\r\n    padding: 8,\r\n    margin: 5,\r\n    paddingLeft: 35,\r\n    userSelect: 'none',\r\n    '&:hover':{\r\n      transform: 'scale(1.02)'\r\n    }\r\n  },\r\n  selectedItem:{\r\n    backgroundColor: '#f66497',\r\n    fontWeight: 'bold'\r\n  },\r\n  star:{\r\n    position: 'absolute',\r\n    left: 10\r\n  }\r\n});","import React,{useState,useReducer,useEffect} from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {Settings,Stars} from '@material-ui/icons';\r\nimport ClassSetting from './ClassSetting';\r\nimport FavSetting from './FavSetting';\r\n\r\nimport {forceUpdateFFClass} from './HttpRequest';\r\n\r\nfunction ClassFilter(props){\r\n\r\n  let [favClubs, setFavClubs] = useState({});\r\n  let [favClasses, setFavClasses] = useState({});\r\n  let [favs, setFavs] = useState({});\r\n  let [favType, setFavType] = useState(null);\r\n  let [favTypeText, setFavTypeText] = useState(null);\r\n  let [favChoices, setFavChoices] = useState(null);\r\n\r\n  let updateFavs = ()=>{\r\n    setFavClubs(JSON.parse(localStorage.getItem('favClubs')||'{}'));\r\n    setFavClasses(JSON.parse(localStorage.getItem('favClasses')||'{}'));\r\n  };\r\n  useEffect(updateFavs, []);\r\n\r\n  let [favDialogOpen, setFavDialogOpen] = useState(false);\r\n  let [settingDialogOpen, setSettingDialogOpen] = useState(false);\r\n\r\n  let clubs = {\r\n    'All': null,\r\n    'Platinum': 'FFP',\r\n    ...Object.keys(favClubs).filter(id=>favClubs[id]).reduce((result,id)=>{\r\n      result[props.clubTypes[id]?.shortname] = id;\r\n      return result;\r\n    }, {})\r\n  };\r\n  let classes = {\r\n    'Access': [183,184,185,182],\r\n    ...Object.keys(favClasses).filter(id=>favClasses[id]).reduce((result,id)=>{\r\n      result[props.classTypes[id]?.shortname] = [id];\r\n      return result;\r\n    }, {})\r\n  };\r\n  const times = ['All', 'No Work'];\r\n\r\n  let [selectedClub, setSelectedClub] = useReducer((curr,sel)=>{\r\n    localStorage.setItem('selClub', sel);\r\n    return sel;\r\n  }, null, ()=>{let club = localStorage.getItem('selClub'); return club=='null'?null:club;});\r\n  let [selectedClasses, setSelectedClasses] = useReducer((curr,sel)=>{\r\n    localStorage.setItem('selClasses', JSON.stringify(sel));\r\n    return sel;\r\n  }, {}, ()=>JSON.parse(localStorage.getItem('selClasses')||'{}'));\r\n  let [selectedTime, setSelectedTime] = useReducer((curr,sel)=>{\r\n    localStorage.setItem('selTime', sel);\r\n    return sel;\r\n  }, 'All', ()=>localStorage.getItem('selTime')||'All');\r\n\r\n  useEffect(function(){\r\n    props.setParamClub(selectedClub);\r\n    props.setParamClasses('['+Object.keys(selectedClasses).filter(key=>selectedClasses[key]).map(key=>classes[key]).flat().filter(id=>id)+']');\r\n    props.setParamTime(selectedTime);\r\n  });\r\n\r\n  let styles = useStyles();\r\n\r\n  return (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{padding:5}} className={styles.filter}>\r\n        <span style={{float: 'right'}}>\r\n          <IconButton onClick={_=>setSettingDialogOpen(true)}><Settings color='action' fontSize='small'/></IconButton>\r\n          <ClassSetting open={settingDialogOpen} setOpen={setSettingDialogOpen}\r\n          accessToken={props.accessToken} setAccessToken={props.setAccessToken}\r\n          country={props.country}/>\r\n          <FavSetting open={favDialogOpen} setOpen={setFavDialogOpen} {...{favs, favType, favTypeText, favChoices, updateFavs}} />\r\n        </span>\r\n        <strong>Club: </strong>\r\n        <IconButton style={{position:'absolute', margin:-10}} onClick={_=>{\r\n          setFavType('favClubs');setFavTypeText('Clubs');setFavChoices(props.clubTypes);setFavs(favClubs);setFavDialogOpen(true);\r\n        }}><Stars color='action' fontSize='small'/></IconButton>\r\n        <br/>\r\n        {\r\n          Object.keys(clubs).map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedClub==clubs[name]}\r\n            onChange={_=>setSelectedClub(clubs[name])}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Class: </strong>\r\n        <IconButton style={{position:'absolute', margin:-10}} onClick={_=>{\r\n          setFavType('favClasses');setFavTypeText('Classes');setFavChoices(props.classTypes);setFavs(favClasses);setFavDialogOpen(true);\r\n        }}><Stars color='action' fontSize='small'/></IconButton>\r\n        <br/>\r\n        {\r\n          Object.keys(classes).map(name=><span key={name}><FormControlLabel control={\r\n            <Checkbox checked={selectedClasses[name] || false}\r\n            onChange={_=>setSelectedClasses({...selectedClasses, [name]:!selectedClasses[name]})}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Time: </strong><br/>\r\n        {\r\n          times.map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedTime==name}\r\n            onChange={_=>setSelectedTime(name)}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <div style={buttonStyle}>\r\n          <Button component={Paper} style={{backgroundColor:'#ff4571'}}\r\n              onClick={forceUpdateFFClass}>Search</Button>\r\n        </div>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClassFilter;\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  filter: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0'\r\n    },\r\n    transition: 'background-color 0.1s',\r\n    backgroundColor: '#ffffffd0'\r\n  }\r\n});\r\n\r\nvar buttonStyle = {\r\n  float: 'right',\r\n  margin: '-40px 5px',\r\n  gap: 5,\r\n  display: 'grid',\r\n  gridTemplateColumns: 'auto auto'\r\n}\r\n","export default {\r\n  \"particles\": {\r\n    \"number\": {\r\n      \"value\": 50,\r\n      \"density\": {\r\n        \"enable\": true,\r\n        \"value_area\": 2000\r\n      }\r\n    },\r\n    \"color\": {\r\n      \"value\": \"#ffffff\"\r\n    },\r\n    \"shape\": {\r\n      \"type\": \"circle\",\r\n      \"stroke\": {\r\n        \"width\": 0,\r\n        \"color\": \"#ffffff\"\r\n      },\r\n      \"polygon\": {\r\n        \"nb_sides\": 3\r\n      },\r\n      \"image\": {\r\n        \"src\": \"img/github.svg\",\r\n        \"width\": 100,\r\n        \"height\": 100\r\n      }\r\n    },\r\n    \"opacity\": {\r\n      \"value\": 1,\r\n      \"random\": false,\r\n      \"anim\": {\r\n        \"enable\": false,\r\n        \"speed\": 1.7582417582417584,\r\n        \"opacity_min\": 0.1,\r\n        \"sync\": false\r\n      }\r\n    },\r\n    \"size\": {\r\n      \"value\": 3,\r\n      \"random\": true,\r\n      \"anim\": {\r\n        \"enable\": true,\r\n        \"speed\": 1,\r\n        \"size_min\": 2,\r\n        \"sync\": false\r\n      }\r\n    },\r\n    \"line_linked\": {\r\n      \"enable\": true,\r\n      \"distance\": 175,\r\n      \"color\": \"#ffffff\",\r\n      \"opacity\": 0.9,\r\n      \"width\": 2\r\n    },\r\n    \"move\": {\r\n      \"enable\": true,\r\n      \"speed\": 1,\r\n      \"direction\": \"none\",\r\n      \"random\": true,\r\n      \"straight\": false,\r\n      \"out_mode\": \"out\",\r\n      \"bounce\": true,\r\n      \"attract\": {\r\n        \"enable\": false,\r\n        \"rotateX\": 881.8766334760375,\r\n        \"rotateY\": 801.7060304327614\r\n      }\r\n    }\r\n  },\r\n  \"interactivity\": {\r\n    \"detect_on\": \"canvas\",\r\n    \"events\": {\r\n      \"onhover\": {\r\n        \"enable\": true,\r\n        \"mode\": \"grab\"\r\n      },\r\n      \"onclick\": {\r\n        \"enable\": true,\r\n        \"mode\": \"bubble\"\r\n      },\r\n      \"resize\": true\r\n    },\r\n    \"modes\": {\r\n      \"grab\": {\r\n        \"distance\": 299.7002997002997,\r\n        \"line_linked\": {\r\n          \"opacity\": 1\r\n        }\r\n      },\r\n      \"bubble\": {\r\n        \"distance\": 523.7898019343676,\r\n        \"size\": 4.060386061506726,\r\n        \"duration\": 0.08120772123013452,\r\n        \"opacity\": 1,\r\n        \"speed\": 3\r\n      },\r\n      \"repulse\": {\r\n        \"distance\": 200,\r\n        \"duration\": 0.4\r\n      },\r\n      \"push\": {\r\n        \"particles_nb\": 4\r\n      },\r\n      \"remove\": {\r\n        \"particles_nb\": 2\r\n      }\r\n    }\r\n  },\r\n  \"retina_detect\": false\r\n}","import React,{useState,useReducer,useEffect} from 'react';\r\nimport ClassTable from './ClassTable';\r\nimport ClassExecutor from './ClassExecutor';\r\nimport ClassFilter from './ClassFilter';\r\nimport {DebugContext} from './Context.js';\r\nimport './App.css';\r\nimport Particles from 'react-particles-js';\r\nimport particlesOptions from './particles.js';\r\n\r\nimport {useClubType, useClassType} from './HttpRequest';\r\n\r\nfunction FFBooker() {\r\n\r\n  const BOOK_OPEN_IN_SECOND = 46*60*60;\r\n  const AFTER_OPEN_IN_SECOND = 4*24*60*60;\r\n  const BOOK_OFFSET_IN_SECOND = 1; // FF is 0.5 seconds behind us\r\n  const BOOK_DURATION_IN_SECOND = 10;\r\n  const BOOK_WAIT_IN_MS = 150;\r\n  const DEBUG_BOOKING = false;\r\n\r\n  let [accessToken, setAccessToken] = useState(_=>localStorage.getItem('accessToken')||'');\r\n  let [country, setCountry] = useState(_=>localStorage.getItem('country')||'sg')\r\n\r\n  let [targetClass, setTargetClass] = useReducer((curr,c)=>{\r\n    if(curr?.classId !== c?.classId){\r\n      //console.log(c);\r\n      return c;\r\n    }else{\r\n      return null;\r\n    }\r\n  }, null);\r\n\r\n  let clubTypes = useClubType({accessToken,country});\r\n  let classTypes = useClassType({accessToken,country});\r\n\r\n  let [paramClub, setParamClub] = useState(null);\r\n  let [paramClasses, setParamClasses] = useState(null);\r\n  let [paramTime, setParamTime] = useState(null);\r\n\r\n  function deselect(e){\r\n    if(e.target === e.currentTarget){\r\n      setTargetClass(null);\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{\r\n    Notification.requestPermission().then(()=>{\r\n      let hiddenState = false;\r\n      let currentNoti = null;\r\n      setInterval(()=>{\r\n        if(document.hidden){\r\n          if(!hiddenState){\r\n            hiddenState = true;\r\n            let noti = new Notification('The FF Booker tab is not active!', {\r\n              body: 'Click here to return to the tab',\r\n              requireInteraction: true\r\n            });\r\n            noti.onclick = () => {window.focus(); window.parent.focus(); noti.close();};\r\n            currentNoti = noti;\r\n          }\r\n        }else{\r\n          hiddenState = false;\r\n          if(currentNoti) currentNoti.close();\r\n        }\r\n      }, 100);\r\n      window.onbeforeunload = () => {if(currentNoti) currentNoti.close();};\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n      <DebugContext.Provider value={DEBUG_BOOKING}>\r\n        <div style={{...backgroundStyle, display:'flex'}} onClick={deselect}>\r\n          <div style={{...blockStyle, maxWidth:1000}} onClick={deselect}>\r\n            <ClassTable handleSelection={c => setTargetClass(c)}\r\n              fromDateAdj={BOOK_OPEN_IN_SECOND}\r\n              toDateAdj={BOOK_OPEN_IN_SECOND+AFTER_OPEN_IN_SECOND}\r\n              selected={targetClass}\r\n              accessToken={accessToken}\r\n              country={country}\r\n              {...{paramClub,paramClasses,paramTime}}\r\n              {...{clubTypes,classTypes}}\r\n            />\r\n          </div>\r\n          <div style={{...blockStyle, minWidth:'325px', maxWidth:'400px', flexGrow: 0}} onClick={deselect}>\r\n            <div style={{display:'flex', flexDirection:'column', maxHeight:'100%'}}>\r\n              <ClassFilter {...{setParamClub,setParamClasses,setParamTime}}\r\n                           {...{accessToken, setAccessToken}}\r\n                           {...{country}}\r\n                           {...{clubTypes,classTypes}}\r\n              />\r\n              <ClassExecutor handleSelection={c => setTargetClass(c)}\r\n                targetClass={targetClass}\r\n                bookOpen={BOOK_OPEN_IN_SECOND}\r\n                bookOffset={BOOK_OFFSET_IN_SECOND}\r\n                bookDuration={BOOK_DURATION_IN_SECOND}\r\n                bookWait={BOOK_WAIT_IN_MS}\r\n                accessToken={accessToken}\r\n                country={country}\r\n                {...{clubTypes,classTypes}}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Particles width='100vw' height='100vh' params={particlesOptions}/>\r\n      </DebugContext.Provider>\r\n  );\r\n}\r\n\r\nexport default FFBooker;\r\n\r\nvar backgroundStyle = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  bottom: 0,\r\n  left: 0,\r\n  right: 0,\r\n  padding: '0 5px',\r\n};\r\n\r\nvar blockStyle = {\r\n  margin: '5px 5px',\r\n  flexGrow: 1\r\n}","import React,{useState,useEffect} from 'react';\nimport FFBooker from './FFBooker';\nimport md5 from 'md5';\n\nfunction App() {\n//a25038dc9be46e08576b9894d0229258\n  let [password, setPassword] = useState(_=>md5(localStorage.getItem('password')||''));\n\n  useEffect(()=>{\n    if(window.location.hash){\n      localStorage.setItem('password', window.location.hash.substring(1));\n      window.location = window.location.href.replace(/#.*/,'');\n    }else if(password !== '417d421480d98cfa8ea643dd7f05208a'){\n      window.location = atob('aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbQ==');\n    }\n  }, []);\n\n  return (<>\n      {password == '417d421480d98cfa8ea643dd7f05208a' && <FFBooker/>}\n  </>);\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}