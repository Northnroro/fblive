{"version":3,"sources":["HttpRequest.js","ClassTable.js","Context.js","ClassExecutor.js","ClassSetting.js","ClassFilter.js","App.js","serviceWorker.js","index.js"],"names":["globalForceUpdateFFClass","reqId","searchClass","props","toTime","toDate","toDay","a","timestamp","Date","getDay","toLocaleDateString","toTimeString","substring","page","data","programIds","paramClasses","fromDate","parseInt","now","fromDateAdj","toDateAdj","pageSize","pageNumber","distance","latitude","longitude","paramClub","clubId","console","log","$","ajax","type","url","dataType","headers","accessToken","res","classes","map","c","classId","class","name","club","date","timeStart","day","duration","timeEnd","start","end","capacity","address","filter","paramShowFull","indexOf","paramTime","forceUpdateFFClass","getExactTime","getHours","getMinutes","getSeconds","getMilliseconds","debug","setExecuting","beforeTime","getTime","r1","Math","random","r2","Promise","r","setTimeout","responseText","class_id","table","afterTime","JSON","parse","message","error","messages","forEach","x","bookClassTimeout","timeout","p1","bookClass","then","resolve","_","p2","race","useStyles","makeStyles","tableWrapper","maxWidth","margin","backgroundColor","tableContainer","maxHeight","transition","minWidth","userSelect","thead","fontWeight","ClassTable","useState","setClasses","useReducer","updateFFClassCnt","useEffect","currReqId","length","classes2","useFFClass","styles","prevDate","Paper","elevation","className","TableContainer","style","Table","stickyHeader","size","TableHead","TableRow","TableCell","TableBody","sort","b","currPrevDate","key","onClick","handleSelection","handleClick","selected","boxShadow","hover","DebugContext","createContext","globalExecuting","ClassExecutor","setTimestamp","watches","action","output","target","clone","bookOpen","bookOffset","localStorage","setItem","stringify","stored","getItem","dispatchWatches","executing","newValue","useContext","success","fail","bookWait","bookPromise","canBook","setInterval","Object","keys","id","lastSeen","seenStatus","result","seenCapacity","toGoogleDate","d","toISOString","replace","formatTime","sec","short","dd","hh","mm","ss","ddhhmmss","preview","blockStyle","targetClass","padding","buttonStyle","IconButton","window","open","escape","Map","color","fontSize","Button","component","queue","overflowX","overflowY","marginBottom","innerBlockStyle","hoverPaper","innerBlockTitleStyle","textDecoration","Tooltip","title","status","placement","tooltip","arrow","VerifiedUser","Cancel","HelpOutline","timeRemaining","sresult","fresult","bookDuration","processBook","calendarSaved","EventNote","undefined","Fragment","transform","top","flexGrow","borderRadius","float","gap","display","gridTemplateColumns","ClassSetting","tokenText","setTokenText","handleClose","setOpen","Dialog","onClose","DialogTitle","DialogContent","DialogContentText","TextField","label","placeholder","multiline","fullWidth","rows","variant","InputLabelProps","shrink","value","onChange","e","DialogActions","setAccessToken","ClassFilter","clubs","selectedClub","setSelectedClub","selectedClasses","setSelectedClasses","selectedTime","setSelectedTime","settingDialogOpen","setSettingDialogOpen","setParamClub","setParamClasses","flat","setParamTime","Settings","FormControlLabel","control","Radio","checked","Checkbox","App","curr","setTargetClass","deselect","currentTarget","Provider","backgroundStyle","BOOK_OPEN_IN_SECOND","flexDirection","position","bottom","left","right","zIndex","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.d2d92c75.chunk.js","sourcesContent":["import React,{useState,useReducer,useEffect} from 'react';\r\nimport $ from 'jquery';\r\n\r\nlet reqId = 0;\r\nlet globalForceUpdateFFClass;\r\n\r\nexport async function searchClass(props, page=1){\r\n  var data = {\r\n    programIds: props.paramClasses,\r\n    fromDate: props.fromDate ? props.fromDate : parseInt(Date.now()/1000 + props.fromDateAdj),\r\n    toDate: props.toDate ? props.toDate : parseInt(Date.now()/1000 + props.toDateAdj),\r\n    pageSize: 100,\r\n    pageNumber: page,\r\n    distance: 2147483647,\r\n    latitude: 0,\r\n    longitude: 0\r\n  };\r\n  if(props?.paramClub !== 'FFP'){\r\n    data.clubId = props.paramClub;\r\n  }\r\n  console.log(\"Search Start\");\r\n  console.log(data);\r\n  var res = await $.ajax({\r\n    type: \"GET\",\r\n    url: \"https://api-mobile.circuithq.com/api/v2/class/search\",\r\n    dataType: 'json',\r\n    headers: {\r\n      \"Authorization\": props.accessToken,\r\n      \"User-Country-Code\": \"sg\"\r\n    },\r\n    data: data\r\n  });\r\n  function toTime(timestamp){\r\n    var d = new Date(timestamp*1000);\r\n    return d.toTimeString().substring(0,5);\r\n  }\r\n  function toDate(timestamp){\r\n      var d = new Date(timestamp*1000);\r\n      return d.toLocaleDateString();\r\n  }\r\n  function toDay(timestamp){\r\n      var d = new Date(timestamp*1000);\r\n      return ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'][d.getDay()];\r\n  }\r\n  var classes = res.data;\r\n  classes = classes.map( c => {\r\n      return {\r\n          classId:c.classId,\r\n          class:c.name,\r\n          club:c.club.name,\r\n          clubId:c.club.clubId,\r\n          date:toDate(c.timeStart),\r\n          day:toDay(c.timeStart),\r\n          timestamp:c.timeStart,\r\n          duration:c.timeEnd-c.timeStart,\r\n          start:toTime(c.timeStart),\r\n          end:toTime(c.timeEnd),\r\n          capacity:c.capacity,\r\n          address:c.club.address\r\n      }\r\n  }).filter( c => c.capacity > 0 || !props.accessToken || props.paramShowFull );\r\n  if(props.paramClub === 'FFP') classes = classes.filter(c=>c.club.indexOf('FFP')===0);\r\n  if(props.paramTime === 'No Work') classes = classes.filter(c=>c.day==='Sat'||c.day==='Sun'||parseInt(c.end)<=11||parseInt(c.start)>=20);\r\n  return classes;\r\n}\r\n\r\nexport function useFFClass(props){\r\n  let [classes, setClasses] = useState([]);\r\n  let [updateFFClassCnt, forceUpdateFFClass] = useReducer(x=>x+1 ,0);\r\n  globalForceUpdateFFClass = forceUpdateFFClass;\r\n\r\n  useEffect(function(){\r\n    if(props.paramClasses){\r\n      (async (currReqId) => {\r\n        setClasses([]);\r\n        let classes = await searchClass(props);\r\n        if(currReqId === reqId){\r\n          setClasses(classes);\r\n          if(classes.length < 30){\r\n            let classes2 = await searchClass(props,2);\r\n            if(currReqId === reqId){\r\n              setClasses([...classes, ...classes2]);\r\n            }\r\n          }\r\n        }\r\n      })(++reqId);\r\n    }\r\n  }, [props.fromDateAdj, props.toDateAdj, props.paramClub, props.paramClasses, props.paramTime, props.accessToken, updateFFClassCnt]);\r\n\r\n  return classes;\r\n}\r\n\r\nexport function forceUpdateFFClass(){\r\n  globalForceUpdateFFClass();\r\n}\r\n\r\nfunction getExactTime(date){\r\n  return date.getHours()+':'+date.getMinutes()+':'+date.getSeconds()+'.'+date.getMilliseconds()\r\n}\r\n\r\nasync function bookClass(classId, accessToken, debug, setExecuting){\r\n\r\n  console.log('Booking... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n  let beforeTime = new Date().getTime();\r\n\r\n  try {\r\n\r\n    if(debug){\r\n      console.log('DEBUG');\r\n      let r1 = Math.random()*Math.random()*Math.random();\r\n      let r2 = Math.random()*Math.random()*Math.random();\r\n      await new Promise(r => setTimeout(r, 50 + r1*r2*20000));\r\n      if(Math.random() > 0.01)\r\n        throw {responseText:'{\"error\":{\"messages\":[\"Debug_Error\"]}}'};\r\n    }else{\r\n      var res = await $.ajax({\r\n        type: \"POST\",\r\n        url: \"https://api-mobile.circuithq.com/api/v2/class/book\",\r\n        dataType: 'json',\r\n        headers: {\r\n          \"Authorization\": accessToken,\r\n          \"User-Country-Code\": \"sg\"\r\n        },\r\n        data: {\r\n          class_id: classId\r\n        }\r\n      });\r\n      console.table(res);\r\n      setExecuting(null);\r\n    }\r\n\r\n    let afterTime = new Date().getTime();\r\n    console.log('[' + (afterTime-beforeTime) + 'ms] Success... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    return true;\r\n  } catch (err) {\r\n    let res = JSON.parse(err.responseText);\r\n    if(res && res.message)\r\n      console.error(res.message); // booking_errors_too_soon booking_errors_overlap errors_unexpected errors_maintenance_mode\r\n    else if(res && res.error && res.error.messages)\r\n      res.error.messages.forEach(x=>console.error(x?.message));\r\n    else\r\n      console.error(res);\r\n    let afterTime = new Date().getTime();\r\n    console.log('[' + (afterTime-beforeTime) + 'ms] Failed... ' + classId + ' ('+ getExactTime(new Date()) + ')');\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function bookClassTimeout(classId, accessToken, debug, timeout, setExecuting){\r\n  let p1 = bookClass(classId, accessToken, debug, setExecuting).then( res => Promise.resolve(_=>new Promise(r=>r(res))) );\r\n  let p2 = new Promise(r => setTimeout(r, timeout)).then( _ => _=>Promise.resolve(p1.then(r=>Promise.resolve(r()))) );\r\n  return Promise.race([p1, p2]);\r\n}","import React,{useState,useEffect} from 'react';\r\nimport $ from 'jquery';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport {useFFClass} from './HttpRequest';\r\n\r\nfunction ClassTable(props){\r\n  let classes = useFFClass(props);\r\n  let styles = useStyles();\r\n\r\n  let handleClick = (c) => {\r\n    props.handleSelection(c);\r\n  };\r\n\r\n  let i=0;\r\n  let prevDate=null;\r\n\r\n  return (\r\n    <Paper elevation={3} className={styles.tableWrapper}>\r\n      <TableContainer className={styles.tableContainer} style={{maxHeight: classes.length?'':36}}>\r\n        <Table stickyHeader className={styles.table} size=\"small\">\r\n          <TableHead className={styles.thead}>\r\n            <TableRow>\r\n              <TableCell>ID</TableCell>\r\n              <TableCell>Club</TableCell>\r\n              <TableCell>Class</TableCell>\r\n              <TableCell>Date</TableCell>\r\n              <TableCell>Time</TableCell>\r\n              <TableCell>Capacity</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {classes.sort((a,b)=>a.timestamp-b.timestamp).map(c => {\r\n              let currPrevDate = prevDate;\r\n              prevDate = c.date;\r\n              return <TableRow key={c.classId}\r\n                onClick={() => handleClick(c)}\r\n                style={{\r\n                  backgroundColor:props.selected?.classId===c.classId?'#00d8f57d':'',\r\n                  boxShadow:currPrevDate==null||c.date==currPrevDate?'':'#b6ccdd 0 2px 0 0 inset'\r\n                }} hover>\r\n                  <TableCell>{c.classId}</TableCell>\r\n                  <TableCell>{c.club}</TableCell>\r\n                  <TableCell>{c.class}</TableCell>\r\n                  <TableCell>{c.date} ({c.day})</TableCell>\r\n                  <TableCell>{c.start} - {c.end}</TableCell>\r\n                  <TableCell>{c.capacity}</TableCell>\r\n                </TableRow>;\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  tableWrapper: {\r\n    maxWidth: 1000,\r\n    margin: '5px 0',\r\n    backgroundColor: '#ffffffe0'\r\n  },\r\n  tableContainer: {\r\n    maxHeight: 'calc(100vh - 20px)',\r\n    transition: 'max-height 0.5s'\r\n  },\r\n  table: {\r\n    minWidth: 650,\r\n    userSelect: 'none'\r\n  },\r\n  thead:{\r\n    '& th': {\r\n      fontWeight: 'bold',\r\n      backgroundColor: '#b6ccdd'\r\n    }\r\n  }\r\n});\r\n\r\nexport default ClassTable;\r\n","import React,{createContext} from 'react';\r\n\r\nconst DebugContext = createContext(false);\r\n\r\nexport {DebugContext};\r\n\r\n","import React,{useState,useReducer,useEffect,useContext} from 'react';\r\nimport $ from 'jquery';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {EventNote,Map,VerifiedUser,Cancel,HelpOutline} from '@material-ui/icons';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport {DebugContext} from './Context.js';\r\n\r\nimport {bookClassTimeout, searchClass} from './HttpRequest';\r\n\r\nlet globalExecuting = null;\r\n\r\nfunction ClassExecutor(props){\r\n\r\n  let [timestamp, setTimestamp] = useState(parseInt(Date.now()/1000));\r\n  let [watches, dispatchWatches] = useReducer((watches, action) => {\r\n    let output = {};\r\n    if(action.action === 'ADD' || action.action === 'UPDATE'){\r\n      output = {...watches, [action.target.classId]:action.target};\r\n    }else if(action.action === 'REMOVE'){\r\n      let clone = {...watches};\r\n      delete clone[action.target.classId];\r\n      output = clone;\r\n    }else if(action.action === 'EXECUTE'){\r\n      action.target.timestamp = timestamp + props.bookOpen + props.bookOffset + 3;\r\n      output = {...watches, [action.target.classId]:action.target};\r\n    }\r\n    localStorage.setItem('watches', JSON.stringify(output));\r\n    return output;\r\n  }, {}, _=>{\r\n    let stored = localStorage.getItem('watches');\r\n    return stored ? JSON.parse(stored) : {};\r\n  });\r\n  let [executing, setExecuting] = useReducer((executing, newValue) => {\r\n    globalExecuting = newValue;\r\n    return newValue;\r\n  }, null);\r\n  let styles = useStyles();\r\n  let debug = useContext(DebugContext);\r\n\r\n  useEffect(function(){\r\n    (async () => {\r\n      let success = 0;\r\n      let fail = 0;\r\n      while(true){\r\n        if(executing !== null && globalExecuting !== null){\r\n          let bookPromise = await bookClassTimeout(executing, props.accessToken, debug, props.bookWait, setExecuting);\r\n          console.log(bookPromise());\r\n          bookPromise().then(canBook => {\r\n            if(canBook){\r\n              dispatchWatches({\r\n                action:'UPDATE',\r\n                target:{...watches[executing], success:++success, fail:fail}\r\n              });\r\n              setExecuting(null);\r\n            }else{\r\n              dispatchWatches({\r\n                action:'UPDATE',\r\n                target:{...watches[executing], success:success, fail:++fail}\r\n              });\r\n            }\r\n          });\r\n        }else{\r\n          break;\r\n        }\r\n      }\r\n    })();\r\n  }, [executing]);\r\n\r\n  useEffect(function(){\r\n    setInterval(_=>{\r\n      setTimestamp(parseInt(Date.now()/1000));\r\n    }, 100);\r\n  }, []);\r\n\r\n  useEffect(function(){\r\n    Object.keys(watches).forEach(async id=>{\r\n      let c = watches[id];\r\n      if(!c.lastSeen || timestamp-c.lastSeen >= 12*60*60){\r\n        c.seenStatus = false;\r\n        try{\r\n          let result = await searchClass({\r\n            fromDate: c.timestamp-15*60,\r\n            toDate: c.timestamp+c.duration+15*60,\r\n            paramClub: c.clubId,\r\n            paramClasses: '[]',\r\n            paramTime: 'All',\r\n            paramShowFull: true,\r\n            accessToken: props.accessToken\r\n          });\r\n          let target = result.filter(c => c.classId == id)[0];\r\n          c.seenStatus = !!target;\r\n          c.seenCapacity = target?.capacity;\r\n        }catch(err){\r\n          delete c.seenStatus;\r\n          console.error(err);\r\n        }finally{\r\n          c.lastSeen = parseInt(Date.now()/1000);\r\n          dispatchWatches({action: 'UPDATE', target: c});\r\n        }\r\n      }\r\n    });\r\n  }, [parseInt(timestamp/10)]);\r\n\r\n  let toGoogleDate = d => d.toISOString().replace(/[-:]/g,'').replace(/\\d\\d\\.\\d\\d\\d/,'00');\r\n\r\n  let saveCalendar = c => {\r\n    c.calendarSaved = true;\r\n    dispatchWatches({action: 'UPDATE', target: c});\r\n    window.open('http://www.google.com/calendar/render?'+\r\n`action=TEMPLATE\r\n&text=${c.class}\r\n&dates=${toGoogleDate(new Date(c.timestamp*1000))}/${toGoogleDate(new Date(c.timestamp*1000+(c.duration||1.5*60*60)*1000))}\r\n&details=${c.club + ': ' + c.class}\r\n&location=${escape(c.address)}\r\n&trp=false\r\n&sprop=\r\n&sprop=name:`, '_blank');\r\n  };\r\n\r\n  let openMap = c => {\r\n    window.open(`http://google.com/maps/dir//${escape(c.address)}`, '_blank');\r\n  };\r\n\r\n  let formatTime = (sec, short=false) => {\r\n    var dd = parseInt(sec/60/60/24);\r\n    if(short && dd > 0) return dd+'d';\r\n    var hh = parseInt(sec/60/60%24);\r\n    if(short && hh > 0) return hh+'h';\r\n    var mm = parseInt(sec/60%60);\r\n    if(short && mm > 0) return mm+'m';\r\n    var ss = parseInt(sec%60);\r\n    if(short && ss > 0) return ss+'s';\r\n    var ddhhmmss = (dd?dd+'d ':'')+(hh?hh+'h ':'')+(mm?mm+'m ':'')+(ss?ss+'s ':'');\r\n    return ddhhmmss;\r\n  }\r\n\r\n  let processBook = c => {\r\n    var timeRemaining = c.timestamp - timestamp - props.bookOpen - props.bookOffset;\r\n    let sresult = c.success?<span>SUCCESS: <strong style={{color:'green'}}>{c.success}</strong> </span>:'';\r\n    let fresult = c.fail?<span>FAILED: <strong style={{color:'red'}}>{c.fail}</strong></span>:'';\r\n    let result = (sresult||fresult)&&<div>{sresult}{fresult}</div>;\r\n    if(timeRemaining <= 0 && timeRemaining+props.bookDuration >= 0 && executing == null && !result){\r\n      setExecuting(c.classId);\r\n    }\r\n    if(executing === c.classId){\r\n      timeRemaining += props.bookDuration;\r\n      if(timeRemaining >= 0){\r\n        return <strong><span style={{color:'red'}}>...EXECUTING...</span> (finish in {parseInt(timeRemaining)} s)<br/>{result}</strong>;\r\n      }else{\r\n        setExecuting(null);\r\n      }\r\n    }else if(timeRemaining >= 0){\r\n      var color = {color: (timeRemaining>3*60*60)?'black':(timeRemaining>1*60*60?'orange':'red')};\r\n      var ddhhmmss = formatTime(timeRemaining);\r\n      return <span>\r\n        Start Booking in <strong style={color}>{ddhhmmss}</strong>\r\n      </span>;\r\n    }else if(result){\r\n      return <span>{result}</span>;\r\n    }\r\n    return <span>Invalid</span>\r\n  };\r\n\r\n  let preview = (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{\r\n        backgroundColor:props.targetClass?(watches[props.targetClass.classId]?'#fdc4d2':'#c4f6fd'):'',\r\n        padding:5\r\n      }} className={styles.preview}>\r\n        <div style={{...buttonStyle, margin:'auto'}}>\r\n          {\r\n            props.targetClass && <IconButton onClick={_=>openMap(props.targetClass)}><Map color='action' fontSize='small'/></IconButton>\r\n          }\r\n        </div>\r\n        <strong>Class ID: </strong> {props.targetClass?.classId} <br/>\r\n        <strong>Club: </strong> {props.targetClass?.club} ({props.targetClass?.clubId}) <br/>\r\n        <strong>Class: </strong> {props.targetClass?.class} <br/>\r\n        <strong>Date: </strong> {props.targetClass?.date} ({props.targetClass?.day}) <br/>\r\n        <strong>Time: </strong> {props.targetClass?.start} - {props.targetClass?.end} <br/>\r\n        <strong>Capacity: </strong> {props.targetClass?.capacity} <br/>\r\n        <div style={buttonStyle}>\r\n          {\r\n            props.targetClass && !watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#1c94f3b5'}}\r\n            onClick={() => dispatchWatches({action:'ADD',target:props.targetClass})}>Add</Button>\r\n          }\r\n          {\r\n            debug && props.targetClass && watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#d21cf3'}}\r\n            onClick={() => dispatchWatches({action:'EXECUTE',target:props.targetClass})}>Execute</Button>\r\n          }\r\n          {\r\n            props.targetClass && watches[props.targetClass.classId] && <Button component={Paper} style={{backgroundColor:'#f31c68b5'}}\r\n            onClick={() => dispatchWatches({action:'REMOVE',target:props.targetClass})}>Remove</Button>\r\n          }\r\n        </div>\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  let queue = (\r\n    <div style={{...blockStyle, overflowX:'hidden', overflowY:'overlay'}}>\r\n      <Paper elevation={3} style={{padding: '1px 5px 1px 5px', backgroundColor: '#ffffffd0'}}>\r\n        <div style={{marginBottom:-6}}><strong>Execution Queue</strong></div>\r\n        {\r\n          Object.keys(watches).map(id =>\r\n            <div key={id} style={innerBlockStyle}>\r\n              <Paper elevation={2} className={styles.hoverPaper} onClick={_=>props.handleSelection(watches[id])} style={{\r\n                backgroundColor:props.targetClass?.classId==id?'#99f3ff':'',\r\n                padding:3\r\n              }}>\r\n                <div style={{...innerBlockTitleStyle,\r\n                  backgroundColor: executing==id?'#d07dff':(\r\n                    watches[id].success?'#7dff84':(\r\n                      watches[id].fail?'#ff7daa':'#d0d0d0'\r\n                  )),\r\n                  boxShadow: props.targetClass?.classId==id?'#00c4ffbf 0 0 99px 0 inset':'',\r\n                  margin: '-3px -3px 0',\r\n                  padding: '0 3px'\r\n                }}>\r\n                  <strong style={{textDecoration: 'underline'}}>{watches[id].club}</strong><strong>: {watches[id].class}</strong>\r\n                  <Tooltip title={(_=>{\r\n                    let classId = watches[id].classId;\r\n                    let status = watches[id].seenStatus === false ? '[INVALID]' : '';\r\n                    let capacity = (watches[id].seenCapacity??'?') + ' / ' + watches[id].capacity;\r\n                    let lastSeen = watches[id].lastSeen && '(' + formatTime(parseInt(Date.now()/1000)-watches[id].lastSeen, true)+' ago)' || '';\r\n                    return `${status} Cap: ${capacity} ${lastSeen}`;\r\n                  })()} placement='top' classes={{tooltip:styles.tooltip}} arrow>\r\n                    <span onClick={() => {delete watches[id].lastSeen; delete watches[id].seenStatus; dispatchWatches({action:'UPDATE',target:watches[id]});}}>{\r\n                      watches[id].seenStatus === true ? <VerifiedUser fontSize='small' style={{color:'green', marginBottom:-3}}/> : \r\n                      (watches[id].seenStatus === false ? <Cancel fontSize='small' style={{color:'red', marginBottom:-3}}/> :\r\n                        <HelpOutline fontSize='small' style={{color:'gray', marginBottom:-3}}/>)\r\n                    }</span>\r\n                  </Tooltip>\r\n                  <span style={{color:'gray'}}></span>\r\n                </div>\r\n                <strong>{watches[id].date} ({watches[id].day})</strong><span> ({watches[id].start} - {watches[id].end})</span><br/>\r\n                {processBook(watches[id])}\r\n                <div style={buttonStyle}>\r\n                  {\r\n                    !!watches[id].success && <IconButton onClick={_=>saveCalendar(watches[id])}><EventNote color={watches[id].calendarSaved?'disabled':undefined} fontSize='small'/></IconButton>\r\n                  }\r\n                </div>\r\n              </Paper>\r\n            </div>)\r\n        }\r\n      </Paper>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {preview}\r\n      {!!Object.keys(watches).length && queue}\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ClassExecutor;\r\n\r\nconst useStyles = makeStyles({\r\n  hoverPaper: {\r\n    '&:hover': {\r\n      backgroundColor: '#ffffffff',\r\n      transform: 'scale(1.03)'\r\n    },\r\n    transition: 'transform 0.1s',\r\n    backgroundColor: '#ffffff80'\r\n  },\r\n  preview: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0',\r\n      transition: 'background-color 0.1s'\r\n    },\r\n    transition: '',\r\n    backgroundColor: '#ffffffd0'\r\n  },\r\n  tooltip: {\r\n    top: '8px',\r\n    color: '#efefef',\r\n    fontSize: 'small',\r\n    backgroundColor: '#333333',\r\n    '&>span.MuiTooltop-arrow':{\r\n      backgroundColor: '#333333'\r\n    }\r\n  }\r\n});\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nvar innerBlockStyle = {\r\n  margin: '8px 0px',\r\n  flexGrow: 1\r\n}\r\n\r\nvar innerBlockTitleStyle = {\r\n  borderRadius: '5px 5px 0px 0px '\r\n}\r\n\r\nvar buttonStyle = {\r\n  float: 'right',\r\n  margin: '-40px 5px',\r\n  gap: 5,\r\n  display: 'grid',\r\n  gridTemplateColumns: 'auto auto'\r\n}\r\n","import React,{useState,useReducer,useEffect} from 'react';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\nfunction ClassSetting(props){\r\n\r\n  let [tokenText, setTokenText] = useState(props.accessToken);\r\n\r\n  let handleSave = _ => {\r\n    props.setAccessToken(tokenText);\r\n    localStorage.setItem('accessToken', tokenText);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  let handleClose = _ => {\r\n    setTokenText(props.accessToken);\r\n    props.setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Dialog open={props.open} onClose={handleClose}>\r\n      <DialogTitle>Settings</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>Access Token is required for getting class capacity and booking classes.</DialogContentText>\r\n        <br/>\r\n        <TextField label=\"Access Token\" placeholder=\"Bearer 58f7GciOiJIUzI1NiJ9.eyJpc3MiOiJodHRw3...\"\r\n        multiline fullWidth rows={8} variant=\"outlined\" InputLabelProps={{shrink: true}}\r\n        value={tokenText} onChange={e=>setTokenText(e.target.value)}/>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={handleClose} color=\"primary\">\r\n          Cancel\r\n        </Button>\r\n        <Button onClick={handleSave} color=\"primary\">\r\n          Save\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ClassSetting;\r\n","import React,{useState,useReducer,useEffect} from 'react';\r\nimport $ from 'jquery';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport {Settings} from '@material-ui/icons';\r\nimport ClassSetting from './ClassSetting';\r\n\r\nimport {forceUpdateFFClass} from './HttpRequest';\r\n\r\nlet globalExecuting = null;\r\n\r\nfunction ClassFilter(props){\r\n\r\n  const clubs = {\r\n    'All': null,\r\n    'FFP': 'FFP',\r\n    'Paragon': 4,\r\n    'George St.': 5,\r\n    'One Raffle Quay': 8,\r\n    'Fusionopolis': 10,\r\n    '100AM': 17,\r\n    'Metropolis': 18,\r\n    'Bugis': 21\r\n  };\r\n  const classes = {\r\n    'Access': [183,184,185,182],\r\n    'Bodyjam': [17]\r\n  };\r\n  const times = ['All', 'No Work'];\r\n\r\n  let [selectedClub, setSelectedClub] = useState(10);\r\n  let [selectedClasses, setSelectedClasses] = useState({\r\n    'Access':true,\r\n    'Bodyjam':true\r\n  });\r\n  let [selectedTime, setSelectedTime] = useState('No Work');\r\n  let [settingDialogOpen, setSettingDialogOpen] = useState(false);\r\n\r\n  useEffect(function(){\r\n    props.setParamClub(selectedClub);\r\n    props.setParamClasses('['+Object.keys(selectedClasses).filter(key=>selectedClasses[key]).map(key=>classes[key]).flat()+']');\r\n    props.setParamTime(selectedTime);\r\n  });\r\n\r\n  let styles = useStyles();\r\n\r\n  return (\r\n    <div style={blockStyle}>\r\n      <Paper elevation={3} style={{padding:5}} className={styles.filter}>\r\n        <span style={{float: 'right'}}>\r\n          <IconButton onClick={_=>setSettingDialogOpen(true)}><Settings color='action' fontSize='small'/></IconButton>\r\n          <ClassSetting open={settingDialogOpen} setOpen={setSettingDialogOpen}\r\n          accessToken={props.accessToken} setAccessToken={props.setAccessToken}/>\r\n        </span>\r\n        <strong>Club: </strong><br/>\r\n        {\r\n          Object.keys(clubs).map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedClub===clubs[name]}\r\n            onChange={_=>setSelectedClub(clubs[name])}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Class: </strong><br/>\r\n        {\r\n          Object.keys(classes).map(name=><span key={name}><FormControlLabel control={\r\n            <Checkbox checked={selectedClasses[name] || false}\r\n            onChange={_=>setSelectedClasses({...selectedClasses, [name]:!selectedClasses[name]})}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <strong>Time: </strong><br/>\r\n        {\r\n          times.map(name=><span key={name}><FormControlLabel control={\r\n            <Radio checked={selectedTime===name}\r\n            onChange={_=>setSelectedTime(name)}/>\r\n          } label={name}/></span>)\r\n        }<br/>\r\n        <div style={buttonStyle}>\r\n          <Button component={Paper} style={{backgroundColor:'#ff4571'}}\r\n              onClick={forceUpdateFFClass}>Search</Button>\r\n        </div>\r\n      </Paper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ClassFilter;\r\n\r\nvar blockStyle = {\r\n  margin: '5px 0',\r\n  flexGrow: 1,\r\n  userSelect: 'none'\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  filter: {\r\n    '&:hover': {\r\n      backgroundColor: '#fffffff0'\r\n    },\r\n    transition: 'background-color 0.1s',\r\n    backgroundColor: '#ffffffd0'\r\n  }\r\n});\r\n\r\nvar buttonStyle = {\r\n  float: 'right',\r\n  margin: '-40px 5px',\r\n  gap: 5,\r\n  display: 'grid',\r\n  gridTemplateColumns: 'auto auto'\r\n}\r\n","import React,{useState,useReducer,createContext} from 'react';\nimport ClassTable from './ClassTable';\nimport ClassExecutor from './ClassExecutor';\nimport ClassFilter from './ClassFilter';\nimport {DebugContext} from './Context.js';\nimport './App.css';\n\nfunction App() {\n\n  const BOOK_OPEN_IN_SECOND = 46*60*60;\n  const AFTER_OPEN_IN_SECOND = 4*24*60*60;\n  const BOOK_OFFSET_IN_SECOND = 1; // FF is 0.5 seconds behind us\n  const BOOK_DURATION_IN_SECOND = 10;\n  const BOOK_WAIT_IN_MS = 150;\n  const DEBUG_BOOKING = false;\n\n  let [accessToken, setAccessToken] = useState(_=>localStorage.getItem('accessToken')||'');\n\n  let [targetClass, setTargetClass] = useReducer((curr,c)=>{\n    if(curr?.classId !== c?.classId){\n      //console.log(c);\n      return c;\n    }else{\n      return null;\n    }\n  }, null);\n\n  let [paramClub, setParamClub] = useState(null);\n  let [paramClasses, setParamClasses] = useState(null);\n  let [paramTime, setParamTime] = useState(null);\n\n  function deselect(e){\n    if(e.target == e.currentTarget){\n      setTargetClass(null);\n    }\n  }\n\n  return (\n      <DebugContext.Provider value={DEBUG_BOOKING}>\n        <div style={{...backgroundStyle, display:'flex'}} onClick={deselect}>\n          <div style={{...blockStyle, maxWidth:1000}} onClick={deselect}>\n            <ClassTable handleSelection={c => setTargetClass(c)}\n              fromDateAdj={0}\n              toDateAdj={BOOK_OPEN_IN_SECOND+AFTER_OPEN_IN_SECOND}\n              selected={targetClass}\n              accessToken={accessToken}\n              {...{paramClub,paramClasses,paramTime}}\n            />\n          </div>\n          <div style={{...blockStyle, minWidth:'325px', maxWidth:'400px', flexGrow: 0}} onClick={deselect}>\n            <div style={{display:'flex', flexDirection:'column', maxHeight:'100%'}}>\n              <ClassFilter {...{setParamClub,setParamClasses,setParamTime}} {...{accessToken, setAccessToken}}/>\n              <ClassExecutor handleSelection={c => setTargetClass(c)}\n                targetClass={targetClass}\n                bookOpen={BOOK_OPEN_IN_SECOND}\n                bookOffset={BOOK_OFFSET_IN_SECOND}\n                bookDuration={BOOK_DURATION_IN_SECOND}\n                bookWait={BOOK_WAIT_IN_MS}\n                accessToken={accessToken}\n              />\n            </div>\n          </div>\n        </div>\n      </DebugContext.Provider>\n  );\n}\n\nexport default App;\n\nvar backgroundStyle = {\n  position: 'absolute',\n  top: 0,\n  bottom: 0,\n  left: 0,\n  right: 0,\n  zIndex: -1,\n  padding: '0 5px',\n};\n\nvar blockStyle = {\n  margin: '5px 5px',\n  flexGrow: 1\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}